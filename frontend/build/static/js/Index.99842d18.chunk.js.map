{"version":3,"sources":["components/RedirectVerify.js","components/ButtonLoading.js","actions/login/updateInputValue.js","actions/login/updateValidating.js","views/index/RenderForm.js","components/reutilizar/ajaxConsult.js","actions/login/loginSinceFormSuccess.js","views/index/Form.js","views/index/PageIndex.js"],"names":["mapDispatchToProps","reloginSuccess","connect","state","auth","loginStatus","children","useEffect","cancelar","keyL","JSON","parse","localStorage","getItem","keyS","sessionStorage","to","pathname","ButtonLoading","estilo","colorsito","loading","text","color","variant","type","updateInputValue","input","payload","updateValidating","status","validating","dataLogin","options","handleChange","handleSubmit","Grow","in","onSubmit","className","TextField","id","name","label","value","user","onChange","required","autoFocus","pass","FormControlLabel","checkbox","control","Checkbox","labelPlacement","consultAjax","consult","a","async","fetch","resAjax","ok","json","then","result","res","loginSinceFormSuccess","updateDataUser","enqueueSnackbar","useSnackbar","getConsult","console","log","cedula","cedulaSin","curso","seccion","nota","horario","profeGuia","privilegio","avatar","token","document","querySelectorAll","forEach","element","disabled","e","preventDefault","setTimeout","PageIndex","title","RedirectVerify","Zoom","timeout","style","fontSize"],"mappings":"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","file":"static/js/Index.99842d18.chunk.js","sourcesContent":["//React\nimport React, { useEffect } from \"react\";\nimport { Redirect } from 'react-router-dom';\n\n//redux\nimport { connect } from 'react-redux';\nimport reloginSuccess from '../actions/login/reloginSuccess';\n\nfunction RedirectVerify({auth, reloginSuccess, children}) {\n  useEffect(() => {\n\t\tlet cancelar = false;//Se crea una variable la cual cancele TODO\n    //el useEffect, esto es para cuando se desmonte el componente\n    //y así evitar problemas.\n\n    if (!cancelar) {//Encierra todas las funciones.\n      //Algoritmos para verificar el LOGIN\n      const keyL = JSON.parse(localStorage.getItem(\"key\"));\n      const keyS = JSON.parse(sessionStorage.getItem(\"key\"));\n\n      if (keyL || keyS){\n        //Al actualizar el AUTH, se le pasa el parámetro\n        //true para decirle a PANEL que está siendo redireccionado\n        //por la web, y así pueda revisar la key sin que\n        //entre en bucle.\n        reloginSuccess(true);\n      }\n    }\n    \n    //Return se usa para llamar la variable la cual cancelará toda la\n    //función. Para entenderlo mejor ver la documentación de los HOOKS.\n    return () => {\n      cancelar = true;\n    }\n  });\n\t\n\t //Verificar auth\n  if (auth){\n    return (\n      <Redirect to={{\n        pathname: '/panel'\n      }} />\n    )\n  }\n\t\n  return (\n    <div>\n      {children}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  auth: state.loginStatus.auth\n})\n\nconst mapDispatchToProps = {\n  reloginSuccess,\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(RedirectVerify);","//React\nimport React from 'react';\n\n//Material-UI\nimport { Button, CircularProgress } from '@material-ui/core';\n\nfunction ButtonLoading({ estilo, colorsito, loading, text }) {\n\tif (loading) {\n\t\treturn <CircularProgress color={colorsito} />;\n\t} else {\n\t\treturn (\n\t\t\t<Button variant={estilo} type=\"submit\" color={colorsito}>\n\t\t\t\t{text}\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nexport default ButtonLoading;","const updateInputValue = (input) => {\n  return {\n    type: \"UPDATE_INPUT_VALUE\",\n    payload: {\n      input\n    }\n  }\n}\n\nexport default updateInputValue;","const updateValidating = (status) => {\n  return {\n    type: \"UPDATE_VALIDATING_FORM\",\n    payload: {\n      validating: status\n    }\n  }\n}\n\nexport default updateValidating;","//React\nimport React from 'react';\n\n//Material-UI\nimport { Grow, TextField, FormControlLabel, Checkbox } from '@material-ui/core';\n\n//Componentes\nimport ButtonLoading from '../../components/ButtonLoading';\n\n//Redux\nimport { connect } from 'react-redux';\n\nfunction RenderForm({ options, dataLogin, validating }) {\n\t//Destructurar datos\n\tconst { handleChange, handleSubmit } = options;\n\n\treturn (\n\t\t<Grow in={true}>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<div className=\"space\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid=\"user-input\"\n\t\t\t\t\t\tname=\"user\"\n\t\t\t\t\t\tlabel=\"Usuario\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tvalue={dataLogin.user}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space\">\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tid=\"pass-input\"\n\t\t\t\t\t\tname=\"pass\"\n\t\t\t\t\t\tlabel=\"Contraseña\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tvalue={dataLogin.pass}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space\">\n\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\tvalue={dataLogin.checkbox}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tcontrol={<Checkbox name=\"checkbox\" color=\"primary\" />}\n\t\t\t\t\t\tlabel=\"Recordar en este equipo\"\n\t\t\t\t\t\tlabelPlacement=\"end\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space\">\n\t\t\t\t\t<ButtonLoading estilo=\"contained\" colorsito=\"primary\" text=\"Acceder\" loading={validating} />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"Copyright\">\n\t\t\t\t\t<span>&copy; UEP APEP \"La Candelaria\" - 2020</span>\n\t\t\t\t\t<span>Desarollado por Recker</span>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Grow>\n\t);\n}\n\n//REDUX\nconst mapStateToProps = state => ({\n\tdataLogin: state.dataLogin,\n\tvalidating: state.loginStatus.validating\n});\n\nexport default connect(mapStateToProps)(RenderForm);","export const consultAjax = async (consult, data=false) => {\n  try {\n    /*\n\t\t//Parametros del ajax\n    let initFetch;\n    if (data){\n      initFetch = {\n        method: 'POST',\n        body: data\n      }\n    }else {\n      initFetch = {\n        method: 'POST'\n      }\n    }\n\t\t*/\n    //Realizar ajax\n    let resAjax = await fetch(consult);\n    //Variable del resultado\n    let res;\n\n    //Verificar estatus\n    if (resAjax.ok) {\n      //Obtener resultado\n      await resAjax.json().then(result => {\n        res = result;\n      });\n      //Regresar resultado\n      return res;\n    }else {\n      //Error al no encontrar el archivo\n      return 'no_connect';\n    }\n  } catch (e) {\n    //Regresar error\n    return e;\n  }\n}","//Se crea una acción la cual será capturada\n//por el reducer correspondiente.\nconst loginSinceFormSuccess = () => {\n  return {\n    type: \"LOGIN_SUCCESS_FROM_LOGIN\"\n  }\n}\n\nexport default loginSinceFormSuccess;","//React\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\n\n//Redux\nimport { connect } from 'react-redux';\nimport updateInputValue from '../../actions/login/updateInputValue';\nimport updateValidating from '../../actions/login/updateValidating';\n\n//Compoentes\nimport RenderForm from './RenderForm';\nimport { consultAjax } from '../../components/reutilizar/ajaxConsult';\nimport updateDataUser from '../../actions/login/updateDataUser';\nimport loginSinceFormSuccess from '../../actions/login/loginSinceFormSuccess';\n\n//SnackBar\nimport { useSnackbar } from 'notistack';\n\nfunction Form({ updateInputValue, updateValidating, auth, updateDataUser, loginSinceFormSuccess }) {\n\t//Crear un SnackBar\n\tconst { enqueueSnackbar } = useSnackbar();\n\n\tconst handleChange = e => {\n\t\t// enviar input al store para actualizar states\n\t\tupdateInputValue(e);\n\t};\n\n\tconst handleSubmit = e => {\n\t\t//Preparativos\n\t\te.preventDefault();\n\t\tupdateValidating(true);\n\n\t\t//Evitar que el usuario cambie de ruta para así\n\t\t//evitar que el componente se desmonte y pueda causar\n\t\t//algún daño.\n\t\tdocument.querySelectorAll('.headerNoPanel button').forEach(element => {\n\t\t\telement.disabled = true;\n\t\t});\n\n\t\t//Consulta\n\t\tsetTimeout(getConsult, 2000);\n\t};\n\n\tconst getConsult = async () => {\n\t\tlet res = await consultAjax(\n\t\t\t'https://my-json-server.typicode.com/recker112/candelariaweb/login'\n\t\t);\n\t\tif (res !== 'no_connect') {\n\t\t\t//Opciones de respuesta del servidor.\n\t\t\tif (true) {\n\t\t\t\tconsole.log(res);\n\n\t\t\t\t//Add SnackBar\n\t\t\t\tenqueueSnackbar('Login exitoso', {\n\t\t\t\t\tvariant: 'success'\n\t\t\t\t});\n\n\t\t\t\t//Boceto de datos a guardar.\n\t\t\t\tconst dataTest = {\n\t\t\t\t\tcedula: 'A-28432441',\n\t\t\t\t\tcedulaSin: '28432441',\n\t\t\t\t\tname: 'Recker ortiz',\n\t\t\t\t\tcurso: '',\n\t\t\t\t\tseccion: '',\n\t\t\t\t\tnota: '',\n\t\t\t\t\thorario: '',\n\t\t\t\t\tprofeGuia: '',\n\t\t\t\t\tprivilegio: 'A-',\n\t\t\t\t\tavatar: 'reckerSITO',\n\t\t\t\t\ttoken: 'testDATA47'\n\t\t\t\t};\n\n\t\t\t\t//Al estar todo correcto el servidor DEBE regresar los\n\t\t\t\t//datos de usuario, los cuales se cargarán con\n\t\t\t\t//\"updateDataUser\"\n\t\t\t\tupdateDataUser(dataTest);\n\n\t\t\t\t//Una vez terminado de actualizar los datos, se procede a\n\t\t\t\t//decirle a la APP que se realizó un login correctamente.\n\t\t\t\tloginSinceFormSuccess();\n\t\t\t}\n\t\t} else {\n\t\t\tenqueueSnackbar('No se pudo conectar con el servidor', {\n\t\t\t\tvariant: 'error'\n\t\t\t});\n\t\t}\n\n\t\t//Reactivando botones.\n\t\tdocument.querySelectorAll('.headerNoPanel button').forEach(element => {\n\t\t\telement.disabled = false;\n\t\t});\n\n\t\tupdateValidating(false);\n\t};\n\n\t//Verificar si se redireccionará o no.\n\tif (auth) {\n\t\treturn (\n\t\t\t<Redirect\n\t\t\t\tto={{\n\t\t\t\t\tpathname: '/panel'\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t} else {\n\t\treturn <RenderForm options={{ handleChange, handleSubmit }} />;\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tauth: state.loginStatus.auth\n});\n\nconst mapDispatchToProps = {\n\tupdateInputValue,\n\tupdateValidating,\n\tupdateDataUser,\n\tloginSinceFormSuccess\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Form);","import React from 'react';\n\n//Material-UI\nimport LockIcon from '@material-ui/icons/Lock';\nimport { Zoom } from '@material-ui/core';\n\n//Componentes\nimport Form from './Form';\nimport RedirectVerify from '../../components/RedirectVerify';\n\nfunction PageIndex({ auth, reloginSuccess }) {\n\t//Titulo\n\tdocument.title = 'La Candelaria - Login';\n\n\t//Regresar contenido del login\n\treturn (\n\t\t<RedirectVerify>\n\t\t\t<div className=\"BoxPageIndex\">\n\t\t\t\t<main>\n\t\t\t\t\t<Zoom in={true} timeout={600}>\n\t\t\t\t\t\t<div className=\"HeadMain\">\n\t\t\t\t\t\t\t<span className=\"IconBoxIndex\">\n\t\t\t\t\t\t\t\t<LockIcon style={{ fontSize: 40 }} />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span className=\"TitleIndex\">La Candelaria</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Zoom>\n\t\t\t\t\t<Form />\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t</RedirectVerify>\n\t);\n}\n\nexport default PageIndex;"],"sourceRoot":""}