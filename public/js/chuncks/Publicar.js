(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{259:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),i=a(0),o=a.n(i),c=a(15),l=a(50),u=a(13),s=a(36),m=a(67),d=a(39),p=a(7),v=a(20),f=a(37),h=a(32),b=a(18);function g(e,t,a,n,r,i,o){try{var c=e[i](o),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var a=[],n=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e){var t=e.handleChange,a=e.error,n=e.values,r=e.option,i=e.loading,l=e.updateInputValue,d=e.contentMaxLength,p=e.progress,v=n.title,f=n.content,h=n.img,b=n.archives;return o.a.createElement(c.a,{container:!0,spacing:2,justify:"center"},o.a.createElement(c.a,{item:!0,xs:12,sm:7,md:5},o.a.createElement(u.a,{data:{val:v,name:"title",label:"Título"},size:"small",accion:t,error:a.title})),o.a.createElement(c.a,{item:!0,xs:12,sm:10,md:8,style:{textAlign:"center"}},o.a.createElement(u.a,{data:{val:f,name:"content",label:"Contenido de la publicación"},accion:t,error:a.content,textarea:!0})),o.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},a.content.status&&""===a.content.message?o.a.createElement("span",{style:{color:"#f44336"}},"".concat(f.length,"/").concat(d," caracteres")):o.a.createElement("span",null,"".concat(f.length,"/").concat(d," caracteres"))),"noticia"===r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{item:!0,xs:12,sm:5,md:3},o.a.createElement(m.a,{idName:"uploadPublic",accepted:"image/*",reset:r,files:h,action:l,multiple:!0,maxSizeFile:{unique:"3MB",multiple:"3MB"},label:{unique:"imagenes",multiple:"imagenes"},name:"img",type:"PUBLICAR"})),o.a.createElement(c.a,{item:!0,xs:12,sm:5,md:3},o.a.createElement(m.a,{idName:"uploadArchivesPublic",accepted:".doc,.docx,.pdf,.xlsx,.xls",reset:r,files:b,action:l,multiple:!0,maxSizeFile:{unique:"2MB",multiple:"2MB"},label:{unique:"archivos",multiple:"archivos"},name:"archives",type:"PUBLICAR"}))),o.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},o.a.createElement(c.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},o.a.createElement(s.a,{estilo:"outlined",colorsito:"inherit",text:"Publicar",loading:i,progressBar:"noticia"===r,progress:p}))))}function y(e){var t=e.action,a=e.value;return o.a.createElement("div",{className:"Box"},o.a.createElement("span",{className:"title"},"Publicar"),o.a.createElement("div",{className:"content"},o.a.createElement(u.c,{action:t,val:a,data:{name:"option",values:[{value:"noticia",name:"Noticia"},{value:"anuncio",name:"Anuncio"}]},classNameSet:"select",customWidth:"auto",empty:!1})))}var w={updateInputValue:v.a,errorInfo:f.a,updateLoading:h.a};t.default=Object(p.b)((function(e){return{data:e.panelSettings.publicarSection}}),w)((function(e){var t=e.data,a=e.updateInputValue,n=e.errorInfo,u=e.updateLoading,s=t.option,m=t.loading,p=t.error,v=t.title,f=t.content,h=t.img,w=t.archives,S="noticia"===s?1e4:520,A=x(Object(i.useState)(0),2),j=A[0],P=A[1],B=Object(b.useSnackbar)().enqueueSnackbar,C=function(e){a(e,"PUBLICAR")},I=function(e){var t=Math.round(100*e.loaded/e.total);P(t)},k=function(){var e,t=(e=r.a.mark((function e(t){var a,n,i,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"noticia"!==s){e.next=7;break}return e.next=4,axios.post("api/news",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:I});case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,axios.post("api/anuncios",t);case 9:a=e.sent;case 10:n=a.data.description,B(n,{variant:"success"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),i=e.t0.response,o=i.status,c=i.data,400===o?B(c.description,{variant:"warning"}):B(403===o||422===o?c.description:500===o?"No se ha podido conectar con la base de datos":"Error interno en el sistema",{variant:"error"});case 18:u(!1,"PUBLICAR");case 19:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){g(i,n,r,o,c,"next",e)}function c(e){g(i,n,r,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();return o.a.createElement(c.a,{container:!0,spacing:2,justify:"center"},o.a.createElement(c.a,{item:!0,xs:12,sm:5,md:3},o.a.createElement(l.a,{variant:"outlined"},o.a.createElement(y,{action:C,value:s}))),o.a.createElement(c.a,{item:!0,xs:12,sm:10},o.a.createElement(l.a,{variant:"outlined"},o.a.createElement("div",{className:"Box"},o.a.createElement("div",{className:"content"},o.a.createElement("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault();var t=!1,a=[{value:v,name:"title",minValue:5},{value:f,name:"content",minValue:20}];t=Object(d.a)(a,n,"PUBLICAR"),f.length>S&&(n("content","","PUBLICAR"),t=!0),"noticia"===s&&w.length>4&&(B("Solo puede subir un máximo de 4 archivos",{variant:"warning"}),t=!0);var r=new FormData;r.append("title",v),r.append("content",f);for(var i=0;i<h.length;i++){var o=h[i];r.append("img[]",o),o.size/1024>3072&&(B("Una de las imagenes supera el tamaño máximo",{variant:"warning"}),t=!0)}for(var c=0;c<w.length;c++){var l=w[c];r.append("archives[]",l),l.size/1024>2048&&(B("Uno de los archivos supera el tamaño máximo",{variant:"warning"}),t=!0)}if(t)return null;u(!0,"PUBLICAR"),k(r)},method:"POST",style:{marginTop:"0"}},o.a.createElement(E,{handleChange:C,error:p,values:{title:v,content:f,img:h},loading:m,updateInputValue:a,option:s,contentMaxLength:S,progress:j})))))))}))},260:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),i=a(0),o=a.n(i),c=a(87),l=a(120),u=a(18);function s(e,t,a,n,r,i,o){try{var c=e[i](o),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var a=[],n=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=function(){var e=m(Object(i.useState)(!1),2),t=e[0],a=e[1],n=!1,d=Object(u.useSnackbar)().enqueueSnackbar,p=function(){var e,t=(e=r.a.mark((function e(){var t,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("api/archivos/boleta",{responseType:"blob"});case 3:t=e.sent,Object(c.a)(t.data,"boleta","pdf"),d("Descargando boleta",{variant:"info"}),n||a(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),i=e.t0.response,o=i.status,i.data,400===o?d("Su boleta aún no ha sido cargada",{variant:"warning"}):d(403===o?"No estás autorizado":422===o?"El servidor rechazó tu solicitud":500===o?"No se ha podido conectar con la base de datos":"Error interno en el sistema",{variant:"error"});case 13:n||a(!0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){s(i,n,r,o,c,"next",e)}function c(e){s(i,n,r,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){return t||p(),function(){n=!0}}),[t,n,a]),t?o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Respuesta obtenida."),o.a.createElement(l.a,{variant:"outlined",color:"inherit",onClick:function(){a(!1)}},"Click aquí para re-intentar")):o.a.createElement("h1",null,"Buscando boleta...")}},39:function(e,t,a){"use strict";t.a=function(e,t,a){var n=!1;return e.map((function(e){return 0===e.value.length?(t(e.name,"Campo obligatorio",a),n=!0):e.minValue&&e.value.length<e.minValue&&(t(e.name,"No válido",a),n=!0),null})),n}},87:function(e,t,a){"use strict";t.a=function(e,t,a){var n=window.URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.href=n,r.setAttribute("download","".concat(t,".").concat(a)),document.body.appendChild(r),r.click()}}}]);