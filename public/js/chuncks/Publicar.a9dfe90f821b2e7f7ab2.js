(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"8yK5":function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("vkC2"),l=n("Z3vd"),u=n("HXb3");function s(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=function(){var e=m(Object(o.useState)(!1),2),t=e[0],n=e[1],a=!1,d=Object(u.useSnackbar)().enqueueSnackbar,p=function(){var e,t=(e=r.a.mark((function e(){var t,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("api/archivos/boleta",{responseType:"blob"});case 3:t=e.sent,Object(c.a)(t.data,"boleta","pdf"),d("Descargando boleta",{variant:"info"}),a||n(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),o=e.t0.response,i=o.status,o.data,400===i?d("Su boleta aún no ha sido cargada",{variant:"warning"}):d(403===i?"No estás autorizado":422===i?"El servidor rechazó tu solicitud":500===i?"No se ha podido conectar con la base de datos":"Error interno en el sistema",{variant:"error"});case 13:a||n(!0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){s(o,a,r,i,c,"next",e)}function c(e){s(o,a,r,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){return t||p(),function(){a=!0}}),[t,a,n]),t?i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"Respuesta obtenida."),i.a.createElement(l.a,{variant:"outlined",color:"inherit",onClick:function(){n(!1)}},"Click aquí para re-intentar")):i.a.createElement("h1",null,"Buscando boleta...")}},NUoh:function(e,t,n){"use strict";t.a=function(e,t,n){var a=!1;return e.map((function(e){return 0===e.value.length?(t(e.name,"Campo obligatorio",n),a=!0):e.minValue&&e.value.length<e.minValue&&(t(e.name,"No válido",n),a=!0),null})),a}},qS50:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("tRbT"),l=n("kKAo"),u=n("4fo9"),s=n("LrKO"),m=n("g6jR"),d=n("NUoh"),p=n("/MKj"),v=n("nXu+"),f=n("uHp0"),b=n("Bnya"),h=n("HXb3");function g(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e){var t=e.handleChange,n=e.error,a=e.values,r=e.option,o=e.loading,l=e.updateInputValue,d=e.contentMaxLength,p=e.progress,v=a.title,f=a.content,b=a.img;return i.a.createElement(c.a,{container:!0,spacing:2,justify:"center"},i.a.createElement(c.a,{item:!0,xs:12,sm:7,md:5},i.a.createElement(u.a,{data:{val:v,name:"title",label:"Título"},size:"small",accion:t,error:n.title})),i.a.createElement(c.a,{item:!0,xs:12,sm:10,md:8,style:{textAlign:"center"}},i.a.createElement(u.a,{data:{val:f,name:"content",label:"Contenido de la publicación"},accion:t,error:n.content,textarea:!0})),i.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},n.content.status&&""===n.content.message?i.a.createElement("span",{style:{color:"#f44336"}},"".concat(f.length,"/").concat(d," caracteres")):i.a.createElement("span",null,"".concat(f.length,"/").concat(d," caracteres"))),"noticia"===r&&i.a.createElement(m.a,{idName:"uploadPublic",accepted:"image/*",reset:r,files:b,action:l,multiple:!0,maxSizeFile:{unique:"3MB",multiple:"3MB"},label:{unique:"imagenes",multiple:"imagenes"},name:"img",type:"PUBLICAR"}),i.a.createElement(c.a,{item:!0,xs:12,style:{textAlign:"center"}},i.a.createElement(c.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},i.a.createElement(s.a,{estilo:"outlined",colorsito:"inherit",text:"Publicar",loading:o,progressBar:"noticia"===r,progress:p}))))}function x(e){var t=e.action,n=e.value;return i.a.createElement("div",{className:"Box"},i.a.createElement("span",{className:"title"},"Publicar"),i.a.createElement("div",{className:"content"},i.a.createElement(u.c,{action:t,val:n,data:{name:"option",values:[{value:"noticia",name:"Noticia"},{value:"anuncio",name:"Anuncio"}]},classNameSet:"select",customWidth:"auto",empty:!1})))}var w={updateInputValue:v.a,errorInfo:f.a,updateLoading:b.a};t.default=Object(p.b)((function(e){return{data:e.panelSettings.publicarSection}}),w)((function(e){var t=e.data,n=e.updateInputValue,a=e.errorInfo,u=e.updateLoading,s=t.option,m=t.loading,p=t.error,v=t.title,f=t.content,b=t.img,w="noticia"===s?1e4:520,j=y(Object(o.useState)(0),2),S=j[0],k=j[1],A=Object(h.useSnackbar)().enqueueSnackbar,C=function(e){n(e,"PUBLICAR")},I=function(e){var t=Math.round(100*e.loaded/e.total);k(t)},O=function(){var e,t=(e=r.a.mark((function e(t){var n,a,o,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"noticia"!==s){e.next=7;break}return e.next=4,axios.post("api/news",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:I});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,axios.post("api/anuncios",t);case 9:n=e.sent;case 10:a=n.data.description,A(a,{variant:"success"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),o=e.t0.response,i=o.status,c=o.data,400===i?A(c.description,{variant:"warning"}):A(403===i||422===i?c.description:500===i?"No se ha podido conectar con la base de datos":"Error interno en el sistema",{variant:"error"});case 18:u(!1,"PUBLICAR");case 19:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){g(o,a,r,i,c,"next",e)}function c(e){g(o,a,r,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return i.a.createElement(c.a,{container:!0,spacing:2,justify:"center"},i.a.createElement(c.a,{item:!0,xs:12,sm:5,md:3},i.a.createElement(l.a,{variant:"outlined"},i.a.createElement(x,{action:C,value:s}))),i.a.createElement(c.a,{item:!0,xs:12,sm:10},i.a.createElement(l.a,{variant:"outlined"},i.a.createElement("div",{className:"Box"},i.a.createElement("div",{className:"content"},i.a.createElement("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault();var t=!1,n=[{value:v,name:"title",minValue:5},{value:f,name:"content",minValue:20}];if(t=Object(d.a)(n,a,"PUBLICAR"),f.length>w&&(a("content","","PUBLICAR"),t=!0),t)return null;u(!0,"PUBLICAR");var r=new FormData;r.append("title",v),r.append("content",f.replace(/\r?\n/g,"</br>"));for(var o=0;o<b.length;o++){var i=b[o];r.append("img[]",i)}O(r)},method:"POST",style:{marginTop:"0"}},i.a.createElement(E,{handleChange:C,error:p,values:{title:v,content:f,img:b},loading:m,updateInputValue:n,option:s,contentMaxLength:w,progress:S})))))))}))},vkC2:function(e,t,n){"use strict";t.a=function(e,t,n){var a=window.URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.href=a,r.setAttribute("download","".concat(t,".").concat(n)),document.body.appendChild(r),r.click()}}}]);