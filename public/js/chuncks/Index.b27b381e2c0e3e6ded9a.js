(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"++HY":function(e,t,a){"use strict";var n=a("wx14"),r=a("q1tI"),o=(a("17x9"),a("H2TA")),i=a("ofer"),c=r.forwardRef((function(e,t){return r.createElement(i.a,Object(n.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))}));t.a=Object(o.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(c)},JaHO:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("Y0qX"),i=a.n(o),c=a("YZMd"),l=a("o0o1"),s=a.n(l),u=a("/MKj"),d=a("xiOe"),m=a("Bnya"),p=a("uHp0"),f=a("eaBJ"),b=function(e){return{type:"AUTH_UPDATE",payload:e}},v=a("bqsI"),h=a("ZGBi"),y=a("wx14"),g=a("Ff2n"),O=(a("17x9"),a("iuhU")),E=a("4ppn"),j=a("5AJ6"),k=Object(j.a)(n.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),S=Object(j.a)(n.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),x=a("ye/S"),w=Object(j.a)(n.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),I=a("NqtD"),N=a("H2TA"),P=n.createElement(S,null),C=n.createElement(k,null),L=n.createElement(w,null),H=n.forwardRef((function(e,t){var a=e.checkedIcon,r=void 0===a?P:a,o=e.classes,i=e.color,c=void 0===i?"secondary":i,l=e.icon,s=void 0===l?C:l,u=e.indeterminate,d=void 0!==u&&u,m=e.indeterminateIcon,p=void 0===m?L:m,f=e.inputProps,b=e.size,v=void 0===b?"medium":b,h=Object(g.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]);return n.createElement(E.a,Object(y.a)({type:"checkbox",classes:{root:Object(O.a)(o.root,o["color".concat(Object(I.a)(c))],d&&o.indeterminate),checked:o.checked,disabled:o.disabled},color:c,inputProps:Object(y.a)({"data-indeterminate":d},f),icon:n.cloneElement(d?p:s,{fontSize:"small"===v?"small":"default"}),checkedIcon:n.cloneElement(d?p:r,{fontSize:"small"===v?"small":"default"}),ref:t},h))})),A=Object(N.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(x.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(x.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(H),U=a("LrKO"),D=a("lopY"),J=a("kfFl"),T=a("yv+Y"),B=a("EQI2"),V=a("++HY"),z=a("+JwS"),q=a("Z3vd"),M=a("tr08"),Y=a("lGwP");function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R=function(){var e=G(Object(n.useState)(!1),2),t=e[0],a=e[1],o=Object(M.a)(),i=Object(D.a)(o.breakpoints.down("xs")),c=function(e){a(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(){a(!0)},style:{cursor:"pointer"}},"v4.0.0 Ver notas"),r.a.createElement(J.a,{open:t,onClose:c,scroll:"paper",fullScreen:i,TransitionComponent:Y.a,"aria-labelledby":"info-title-dialog","aria-describedby":"info-description-dialog"},r.a.createElement(T.a,{id:"info-title-dialog"},"v4.0.0"),r.a.createElement(B.a,{dividers:!0},r.a.createElement(V.a,{id:"info-description-dialog"},r.a.createElement("h3",null,"Bienvenidos a la v4.0.0 de la app web"),r.a.createElement("p",null,"Novedades:",r.a.createElement("br",null),"- Visor de imágenes disponible.",r.a.createElement("br",null),"- Compatibilidad con navegadores antiguos.",r.a.createElement("br",null),"- Cambio en la paleta de colores del modo oscuro.",r.a.createElement("br",null),"- Arreglo de algunos errores.",r.a.createElement("br",null),"- Sistema funcionando en su totalidad.",r.a.createElement("br",null)))),r.a.createElement(z.a,null,r.a.createElement(q.a,{color:"primary",onClick:c},"Entendido"))))},F=a("4fo9");var _=Object(u.b)((function(e){return{dataLogin:e.dataLogin,validating:e.loginStatus.validating,error:e.dataLogin.error}}))((function(e){var t=e.options,a=e.dataLogin,n=e.validating,o=e.error,i=t.handleChange,c=t.handleSubmit;return r.a.createElement(v.a,{in:!0},r.a.createElement("form",{onSubmit:c},r.a.createElement("div",{className:"space"},r.a.createElement(F.a,{data:{val:a.user,name:"user",label:"Usuario"},accion:i,error:o.user,focus:!0})),r.a.createElement("div",{className:"space"},r.a.createElement(F.a,{data:{val:a.pass,name:"pass",label:"Contraseña"},accion:i,error:o.pass,visibleToggle:!0,maxWidth:"278px"})),r.a.createElement("div",{className:"space"},r.a.createElement(h.a,{value:a.checkbox,onChange:i,control:r.a.createElement(A,{name:"checkbox",color:"primary"}),label:"Recordar en este equipo",labelPlacement:"end"})),r.a.createElement("div",{className:"space"},r.a.createElement(U.a,{estilo:"contained",colorsito:"primary",text:"Acceder",loading:n})),r.a.createElement("div",{className:"Copyright"},r.a.createElement("span",null,'© UEP APEP "La Candelaria" - 2020'),r.a.createElement("span",null,"Desarollado por Recker"),r.a.createElement(R,null))))})),Z=a("NUoh"),$=a("HXb3");function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){X(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Q(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}var ee={updateValue:d.a,updateLoading:m.a,updateDataUser:f.a,authUpdate:b,errorInfo:p.a},te=Object(u.b)((function(e){return{auth:e.loginStatus.auth,dataLogin:e.dataLogin}}),ee)((function(e){var t=e.updateValue,a=e.updateLoading,n=(e.auth,e.updateDataUser),o=e.authUpdate,i=e.dataLogin,c=e.errorInfo,l=i.user,u=i.pass,d=i.checkbox,m=Object($.useSnackbar)().enqueueSnackbar,p=function(){var e,t=(e=s.a.mark((function e(){var t,r,i,c,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.post("api/login",{user:l,pass:u,checkbox:d});case 3:t=e.sent,n(W({},t.data)),r=t.data.access_key,d?(localStorage.setItem("key",JSON.stringify(r)),sessionStorage.setItem("key",JSON.stringify(r))):sessionStorage.setItem("key",JSON.stringify(r)),o(!0),m("Login exitoso",{variant:"success"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),i=e.t0.response,c=i.status,p=i.data,400===c?m(p.description,{variant:"warning"}):m(422===c?p.description:500===c?"No se ha podido conectar con la base de datos":"Error interno en el sistema",{variant:"error"});case 15:a(!1,"LOGIN");case 16:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){Q(o,n,r,i,c,"next",e)}function c(e){Q(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return r.a.createElement(_,{options:{handleChange:function(e){t(e,"LOGIN")},handleSubmit:function(e){e.preventDefault();var t=[{value:l,name:"user",minValue:3},{value:u,name:"pass",minValue:4}];if(!0===Object(Z.a)(t,c,"LOGIN"))return null;a(!0,"LOGIN"),p()}}})})),ae=a("6HSS"),ne=a("Ty5D"),re=a("7adP");function oe(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ce={updateDataUser:f.a,authUpdate:b,logout:ae.a},le=Object(u.b)((function(e){return{auth:e.loginStatus.auth,checkbox:e.dataLogin.checkbox}}),ce)((function(e){var t=e.children,a=e.auth,o=(e.checkbox,e.updateDataUser),i=e.authUpdate,c=e.logout,l=Object($.useSnackbar)().enqueueSnackbar,u=ie(Object(n.useState)(!0),2),d=u[0],m=u[1],p=ie(Object(n.useState)(!1),2),f=p[0],b=p[1],v=Object(ne.g)(),h=Object(ne.h)().state||{from:{pathname:"/"}},y=h.from;return h.protect,Object(n.useEffect)((function(){var e=!1,t=function(){var t,a=(t=s.a.mark((function t(a){var n,r,u,d,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]&&p[1],t.prev=1,t.next=4,axios.get("api/relogin",{headers:{Authorization:"Bearer ".concat(a)}});case 4:r=t.sent,o(r.data),n?(localStorage.setItem("key",JSON.stringify(r.data.access_key)),sessionStorage.setItem("key",JSON.stringify(r.data.access_key))):sessionStorage.setItem("key",JSON.stringify(r.data.access_key)),b(!0),i(!0),"/"!==y.pathname&&"/login"!==y.pathname?v.replace(y):v.replace("/panel"),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),u=t.t0.response||{status:"error"},d=u.status,l(401===d?"Sesión expirada":500===d?"Error interno del servidor":"Error interno en el sistema",{variant:"error"}),c();case 17:e||m(!1);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})),function(){var e=this,a=arguments;return new Promise((function(n,r){var o=t.apply(e,a);function i(e){oe(o,n,r,i,c,"next",e)}function c(e){oe(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}(),n=JSON.parse(localStorage.getItem("key")),r=JSON.parse(sessionStorage.getItem("key"));return!a&&"string"==typeof n&&n.length>0?t(n,!0):!a&&"string"==typeof r&&r.length>0?t(r,!1):m(!1),function(){e=!0}}),[d,a,i,l,y,v,c,o]),d?r.a.createElement(re.a,null):(a&&!f&&v.replace("/panel"),t)}));t.default=function(e){return e.auth,e.reloginSuccess,document.title="La Candelaria - Login",r.a.createElement(le,null,r.a.createElement("div",{className:"BoxPageIndex"},r.a.createElement("main",null,r.a.createElement(c.a,{in:!0,timeout:600},r.a.createElement("div",{className:"HeadMain"},r.a.createElement("span",{className:"IconBoxIndex"},r.a.createElement(i.a,{style:{fontSize:40}})),r.a.createElement("h1",{className:"TitleIndex"},"La Candelaria"))),r.a.createElement(te,null))))}},NUoh:function(e,t,a){"use strict";t.a=function(e,t,a){var n=!1;return e.map((function(e){return 0===e.value.length?(t(e.name,"Campo obligatorio",a),n=!0):e.minValue&&e.value.length<e.minValue&&(t(e.name,"No válido",a),n=!0),null})),n}},YZMd:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),o=a("q1tI"),i=(a("17x9"),a("dRu9")),c=a("wpWl"),l=a("tr08"),s=a("4Hym"),u=a("bfFb"),d={entering:{transform:"none"},entered:{transform:"none"}},m={enter:c.b.enteringScreen,exit:c.b.leavingScreen},p=o.forwardRef((function(e,t){var a=e.children,c=e.in,p=e.onEnter,f=e.onExit,b=e.style,v=e.timeout,h=void 0===v?m:v,y=Object(r.a)(e,["children","in","onEnter","onExit","style","timeout"]),g=Object(l.a)(),O=Object(u.a)(a.ref,t);return o.createElement(i.a,Object(n.a)({appear:!0,in:c,onEnter:function(e,t){Object(s.b)(e);var a=Object(s.a)({style:b,timeout:h},{mode:"enter"});e.style.webkitTransition=g.transitions.create("transform",a),e.style.transition=g.transitions.create("transform",a),p&&p(e,t)},onExit:function(e){var t=Object(s.a)({style:b,timeout:h},{mode:"exit"});e.style.webkitTransition=g.transitions.create("transform",t),e.style.transition=g.transitions.create("transform",t),f&&f(e)},timeout:h},y),(function(e,t){return o.cloneElement(a,Object(n.a)({style:Object(n.a)({transform:"scale(0)",visibility:"exited"!==e||c?void 0:"hidden"},d[e],{},b,{},a.props.style),ref:O},t))}))}));t.a=p}}]);