(this["webpackJsonpla-candelaria-web"]=this["webpackJsonpla-candelaria-web"]||[]).push([[11],{225:function(e,a,t){"use strict";a.a=function(e,a){return{type:"UPDATE_VALUE_".concat(a),payload:e}}},228:function(e,a,t){"use strict";a.a=function(e,a){return{type:"UPDATE_LOADING_".concat(a),payload:e}}},229:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(409),c=t(181),o=t(283);function i(e){var a=e.color,t=e.progress,n=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{color:a,variant:"static",value:t}),r.a.createElement("span",{style:{position:"relative",top:"-30px"}},t,"%"),n&&r.a.createElement("span",{style:{position:"relative",top:"-10px"}},n))}function s(e){var a=e.loading,t=e.progress,n=e.progressBar,o=e.colorsito,s=e.progressLabel;return a&&n&&100!==t?r.a.createElement(c.a,{open:!0,style:{zIndex:200}},r.a.createElement(i,{color:o,progress:t,label:s})):r.a.createElement(c.a,{open:!0,style:{zIndex:200}},r.a.createElement(l.a,{color:o}))}a.a=function(e){var a=e.estilo,t=e.colorsito,n=e.loading,c=e.text,u=e.onClick,m=void 0===u?function(){}:u,d=e.progressBar,p=void 0!==d&&d,v=e.progress,f=void 0===v?0:v,b=e.progressLabel,E=void 0!==b&&b,g=e.backDrop;return n&&!(void 0!==g&&g)?p&&100!==f?r.a.createElement(i,{color:t,progress:f,label:E}):r.a.createElement(l.a,{color:t}):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{onClick:m,variant:a,type:"submit",color:t},c),n&&r.a.createElement(s,{loading:!0,progress:f,progressBar:p,colorsito:t,progressLabel:E}))}},230:function(e,a,t){"use strict";t.d(a,"c",(function(){return y})),t.d(a,"b",(function(){return k})),t.d(a,"a",(function(){return O}));var n=t(84),r=t(0),l=t.n(r),c=t(365),o=t(440),i=t(218),s=t(414),u=t(415),m=t(368),d=t(417),p=t(437),v=t(418),f=t(420),b=t(214),E=t(231),g=t.n(E),x=t(232),h=t.n(x);function y(e){var a=e.val,t=e.action,n=e.data,r=e.error,u=void 0!==r&&r,m=e.empty,d=void 0===m||m,p=e.classNameSet,v=void 0!==p&&p,f=e.customWidth,b=void 0!==f&&f;return l.a.createElement(c.a,{error:u&&u.status,style:{width:b||"100%"}},l.a.createElement(o.a,{displayEmpty:!0,name:n.name,value:a,onChange:t,className:v||null},n.values.map((function(e,a){return 0===a&&d?l.a.createElement(i.a,{key:a,value:e.value},l.a.createElement("em",null,e.name)):l.a.createElement(i.a,{key:a,value:e.value},e.name)}))),u&&l.a.createElement(s.a,null,u.message))}function k(e){var a=e.val,t=e.accion,n=e.data;return l.a.createElement(c.a,{component:"fieldset"},l.a.createElement(u.a,{color:n.color,component:"legend"},n.title),l.a.createElement(m.a,{"aria-label":n.name,name:n.name,value:a,onChange:t,row:!0},n.values.map((function(e,a){return l.a.createElement(d.a,{key:a,value:e.value,control:l.a.createElement(p.a,{color:n.color}),label:e.name,labelPlacement:"end"})}))))}function O(e){var a=e.data,t=e.accion,c=e.error,o=e.variant,i=void 0===o?"outlined":o,s=e.textarea,u=void 0!==s&&s,m=e.maxRows,d=void 0===m?6:m,p=e.maxWidth,E=void 0!==p&&p,x=e.size,y=void 0===x?"medium":x,k=e.visibleToggle,O=void 0!==k&&k,w=e.focus,j=void 0!==w&&w,A=a.val,C=a.name,L=a.label,z=c.status,U=c.message,_=Object(r.useState)(!1),N=Object(n.a)(_,2),P=N[0],D=N[1],S={rows:4,rowsMax:d};return l.a.createElement(v.a,Object.assign({type:O?P?"text":"password":"text",name:C,value:A,label:L,size:y,autoFocus:j,style:{width:"100%",maxWidth:E||"none"},variant:i,onChange:t,multiline:u,InputProps:{endAdornment:O?l.a.createElement(f.a,{position:"end"},l.a.createElement(b.a,{onClick:function(){D(!P)},size:y},P?l.a.createElement(g.a,null):l.a.createElement(h.a,null))):null}},S,{error:z,helperText:z&&U}))}},231:function(e,a,t){"use strict";var n=t(18);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(19)).default)(r.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");a.default=l},232:function(e,a,t){"use strict";var n=t(18);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(19)).default)(r.default.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");a.default=l},233:function(e,a,t){"use strict";a.a=function(e,a,t){return{type:"ERROR_INFO_".concat(t),payload:{input:e,message:a}}}},234:function(e,a,t){"use strict";a.a=function(e,a,t){var n=!1;return e.map((function(e){return 0===e.value.length?(a(e.name,"Campo obligatorio",t),n=!0):e.minValue&&e.value.length<e.minValue&&(a(e.name,"No v\xe1lido",t),n=!0),null})),n}},245:function(e,a,t){"use strict";t.d(a,"b",(function(){return n}));var n=function(e){var a=document.createElement("a");a.href=e;var t=e.split("/");t=t[t.length-1],a.setAttribute("download","".concat(t)),document.body.appendChild(a),a.click()};a.a=function(e,a,t){var n=window.URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.href=n,r.setAttribute("download","".concat(a,".").concat(t)),document.body.appendChild(r),r.click()}},249:function(e,a,t){"use strict";var n=t(84),r=t(0),l=t.n(r),c=t(283),o=t(91),i=t.n(o);a.a=function(e){var a=e.name,t=e.label,o=e.reset,s=e.action,u=e.idName,m=e.type,d=e.accepted,p=e.maxSizeFile,v=e.maxInfo,f=void 0===v||v,b=e.multiple,E=void 0!==b&&b,g=e.updatePreview,x=void 0!==g&&g,h=Object(r.useState)(0),y=Object(n.a)(h,2),k=y[0],O=y[1];return Object(r.useEffect)((function(){var e={target:{name:a,files:[]}};O(0),s(e,m)}),[o,s,a,m]),l.a.createElement("div",{className:"uploadArchives",style:{textAlign:"center"}},l.a.createElement("input",{accept:d,id:u,multiple:E,type:"file",name:a,style:{display:"none"},onChange:function(e){var a=e.target.files,t=!1;if(s(e,m),x){var n=x.update,r=x.currentAvatar;a[0]?n(URL.createObjectURL(a[0])):n(r)}for(var l=0;l<a.length;l++)O(l+1),t=!0;!t&&O(0)}}),l.a.createElement("label",{htmlFor:u},l.a.createElement(c.a,{variant:"contained",startIcon:l.a.createElement(i.a,null),disableElevation:!0,component:"span"},"Cargar ",E&&t.multiple?t.multiple:t.unique)),f&&l.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"5px"}},E&&p.multiple?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Archivos seleccionados: ",k),l.a.createElement("span",null,"(Tama\xf1o m\xe1ximo: ",p.multiple,")")):l.a.createElement("span",null,"(Tama\xf1o m\xe1ximo: ",p.unique,")")))}},429:function(e,a,t){"use strict";t.r(a);var n=t(236),r=t(226),l=t.n(r),c=t(227),o=t(84),i=t(0),s=t.n(i),u=t(421),m=t(83),d=t(230),p=t(242),v=t(229),f=t(249),b=t(234),E=t(245),g=t(12),x=t(225),h=t(233),y=t(228),k=t(50);function O(e){var a=e.upload,t=e.action;return s.a.createElement("div",{className:"Box"},s.a.createElement("span",{className:"Box__Title"},"Seleccionar carga"),s.a.createElement("div",{className:"Box__Content"},s.a.createElement(d.c,{action:t,val:a,data:{name:"option",values:[{value:"matricula",name:"Matricula"},{value:"boletas",name:"Boletas"}]},classNameSet:"select",customWidth:"auto",empty:!1})))}function w(e){var a=e.action,t=e.curso,r=e.seccion,l=e.error,c={name:"curso",values:[{value:"",name:"Grado/A\xf1o"}].concat(Object(n.a)(p.a))},o={name:"seccion",values:[{value:"",name:"Seccion"}].concat(Object(n.a)(p.c))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,{item:!0,xs:5,sm:4,md:3},s.a.createElement(d.c,{error:l.curso,action:a,val:t,data:c})),s.a.createElement(u.a,{item:!0,xs:5,sm:4,md:3},s.a.createElement(d.c,{error:l.seccion,action:a,val:r,data:o})))}var j={updateValue:x.a,errorInfo:h.a,updateLoading:y.a};a.default=Object(g.b)((function(e){return{data:e.panelSettings.uploadSection}}),j)((function(e){var a=e.data,t=e.updateValue,n=e.errorInfo,r=e.updateLoading,d=window.axios,p=Object(k.b)().enqueueSnackbar,g=a.option,x=a.curso,h=a.seccion,y=a.loading,j=a.files,A=a.error,C=Object(i.useState)(0),L=Object(o.a)(C,2),z=L[0],U=L[1],_=Object(i.useState)(""),N=Object(o.a)(_,2),P=N[0],D=N[1];function S(e){t(e,"UPLOAD")}var T=function(e){var a=Math.round(100*e.loaded/e.total);U(a)},M=function(){var e=Object(c.a)(l.a.mark((function e(a,t){var n,c,o,i,s,u,m,v,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"matricula"!==t){e.next=7;break}return e.next=4,d.post("api/upload/matricula",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:T});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,d.post("api/upload/boletas",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:T});case 9:n=e.sent;case 10:if(c=n.data,o=c.description,i=c.status,p(o,{variant:"not_all_upload_boletas"===i?"warning":"success"}),"boletas"!==t){e.next=16;break}e.next=22;break;case 16:return s=n.data.fileName,u=n.data.fileExtension,e.next=20,d.get("api/matricula/".concat(s,".").concat(u),{responseType:"blob"});case 20:n=e.sent,Object(E.a)(n.data,s,u);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),e.t0.response?(m=e.t0.response,v=m.status,f=m.data,400===v?p(f.description,{variant:"warning"}):p(403===v||422===v?f.description:500===v?"No se ha podido conectar con la base de datos":"Error interno en el servidor",{variant:"error"})):p("Error interno en el sistema",{variant:"error"});case 27:r(!1,"UPLOAD"),U(0);case 29:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(a,t){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(l.a.mark((function e(a){var t,c,o,i,s,u,m,d,v,f,E,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),0===j.length&&(p("Debe cargar alg\xfan archivo primero",{variant:"warning"}),!0),t=[{value:x,name:"curso"},{value:h,name:"seccion"}],!Object(b.a)(t,n,"UPDATE")){e.next=6;break}return e.abrupt("return",null);case 6:if(c=new FormData,o=20,!((i=j.length)>20)){e.next=37;break}s=Math.ceil(i/o),u=!1,m=0;case 13:if(!(m<s)){e.next=35;break}d=0;case 15:if(!(d<o)||u){e.next=25;break}if(v=j[d+o*m],c.append("files[]",v),!(v.size/1024>2048)){e.next=21;break}return p("Uno de los archivos supera el tama\xf1o m\xe1ximo",{variant:"warning"}),e.abrupt("return",null);case 21:m===s-1&&d===i-1-o*m&&(u=!0);case 22:d++,e.next=15;break;case 25:return c.append("curso",x),c.append("seccion",h),D("".concat(m+1,"/").concat(s)),r(!0,"UPLOAD"),e.next=31,M(c,g);case 31:c=new FormData;case 32:m++,e.next=13;break;case 35:e.next=57;break;case 37:for(f=0;f<j.length;f++)E=j[f],c.append("files[]",E);if(c.append("curso",x),c.append("seccion",h),!("matricula"===g&&j[0].size/1024>1024)){e.next=45;break}return p("El archivo supera el tama\xf1o m\xe1ximo",{variant:"warning"}),e.abrupt("return",null);case 45:if("boletas"!==g){e.next=55;break}y=0;case 47:if(!(y<j.length)){e.next=55;break}if(!(j[y].size/1024>2048)){e.next=52;break}return p("Uno de los archivos supera el tama\xf1o m\xe1ximo",{variant:"warning"}),e.abrupt("return",null);case 52:y++,e.next=47;break;case 55:r(!0,"UPLOAD"),M(c,g);case 57:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement(u.a,{container:!0,spacing:2,justify:"center"},s.a.createElement(u.a,{item:!0,xs:12,sm:5,md:3},s.a.createElement(m.a,null,s.a.createElement(O,{upload:g,action:S}))),s.a.createElement(u.a,{item:!0,xs:12,sm:10},s.a.createElement(m.a,null,s.a.createElement("div",{className:"Box"},s.a.createElement("div",{className:"content"},s.a.createElement("form",{autoComplete:"off",encType:"multipart/form-data",method:"POST",onSubmit:B,style:{marginTop:"0"}},s.a.createElement(u.a,{container:!0,spacing:2,justify:"center"},s.a.createElement(u.a,{item:!0,xs:12},s.a.createElement(f.a,{accepted:"matricula"===g?".csv,.xls,.xlsx,.ods":".pdf,.doc,.docx",idName:"uploadFiles",reset:g,files:j,action:t,multiple:"matricula"!==g,maxSizeFile:{unique:"1MB",multiple:"2MB"},label:{unique:"matricula",multiple:"boletas"},name:"files",type:"UPLOAD"})),s.a.createElement(w,{error:A,action:S,curso:x,seccion:h}),s.a.createElement(u.a,{item:!0,xs:12,style:{textAlign:"center"}},s.a.createElement(u.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},s.a.createElement(v.a,{estilo:"outlined",colorsito:"inherit",text:"Cargar",loading:y,progressBar:!0,progress:z,progressLabel:P}))))))))))}))}}]);
//# sourceMappingURL=11.83dd6942.chunk.js.map