(this.webpackJsonpGedure=this.webpackJsonpGedure||[]).push([[10],{242:function(e,a,t){"use strict";t.r(a);var n=t(48),r=t(47),c=t.n(r),i=t(60),o=t(0),l=t.n(o),s=t(13),m=t(45),u=t(234),d=t(391),p=t(482),g=t(80),E=t(206),f=t(263),v=t(163),b=t(82),x=t(253),h=t(466),j=t(115),O=t(521),y=t.n(O),w=t(520),C=t.n(w),A=t(101),N=t(107),k=t(324),D=t(380),S=t(23),_=t(379),L=t(277),T=Object(j.a)((function(e){return{root:{marginTop:e.spacing(8),flexGrow:1},margin:{marginTop:e.spacing(4),marginBottom:e.spacing(4)},padding:{padding:e.spacing(2)},paddingSmall:{padding:e.spacing(1)},largeAvatar:{width:e.spacing(10),height:e.spacing(10),background:e.palette.secondary.main}}}));function I(e){var a=e.data,t=e.handleClick,n=e.handleClose,r=e.anchorEl,c=Object(S.c)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{"aria-controls":"menu-options","aria-haspopup":"true",onClick:t},l.a.createElement(C.a,null)),l.a.createElement(d.a,{id:"menu-options",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:n},l.a.createElement(p.a,{onClick:function(){c(Object(L.a)("editNotice",!0,!1,a)),n()}},"Editar"),l.a.createElement(p.a,{onClick:function(){c(Object(L.a)("confirmAction",!0,!1,{id:a.id})),n()}},"Eliminar")))}function q(){var e=T();return l.a.createElement(g.a,{className:"".concat(e.margin," ").concat(e.padding)},l.a.createElement(E.a,{container:!0,spacing:1},l.a.createElement(E.a,{container:!0,alignContent:"flex-start",spacing:2,item:!0,xs:12,sm:2},l.a.createElement(E.a,{container:!0,justify:"center",item:!0,xs:12},l.a.createElement(h.a,{variant:"circle",className:e.largeAvatar})),l.a.createElement(E.a,{container:!0,justify:"center",item:!0,xs:!0},l.a.createElement(h.a,{variant:"text",width:80}))),l.a.createElement(E.a,{container:!0,spacing:2,justify:"center",item:!0,xs:12,sm:!0},l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(h.a,{variant:"text",width:200,height:35})),l.a.createElement(E.a,{container:!0,spacing:1,item:!0,xs:12},l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(h.a,{variant:"text"})),l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(h.a,{variant:"text"})),l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(h.a,{variant:"text"})),l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(h.a,{variant:"text"})),l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(h.a,{variant:"text"})),l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(h.a,{variant:"text"}))),l.a.createElement(E.a,{container:!0,spacing:2,item:!0,xs:12},l.a.createElement(E.a,{item:!0,xs:6,sm:!0},l.a.createElement(h.a,{variant:"rect",height:150})),l.a.createElement(E.a,{item:!0,xs:6,sm:!0},l.a.createElement(h.a,{variant:"rect",height:150})),l.a.createElement(E.a,{item:!0,xs:6,sm:!0},l.a.createElement(h.a,{variant:"rect",height:150})),l.a.createElement(E.a,{item:!0,xs:6,sm:!0},l.a.createElement(h.a,{variant:"rect",height:150}))),l.a.createElement("hr",{width:"100%"}),l.a.createElement(E.a,{container:!0,justify:"flex-end",item:!0,xs:12},l.a.createElement(h.a,{variant:"text",width:150})))))}a.default=function(){var e=Object(s.i)().id,a=Object(A.a)().fetchData,t=Object(S.d)((function(e){return{auth:e.userData.auth,loading:e.appData.noticiaSelected.loading,noticeData:e.appData.noticiaSelected.data,permissions:e.userData.permissions,userData:e.userData.user}})),r=t.auth,d=t.loading,p=t.noticeData,j=t.permissions,O=t.userData,w=Object(S.c)(),C=Object(s.g)(),z=T();Object(o.useEffect)((function(){d&&function(){var t=Object(i.a)(c.a.mark((function t(){var n,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r?"v1/noticias/user/".concat(e):"v1/noticias/".concat(e),i={url:n,type:"get",messageToFinish:!1},t.next=4,a(i);case 4:o=t.sent,w(o?Object(_.a)("noticiaSelected",!1,o):Object(_.a)("noticiaSelected",!1));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[d]),Object(o.useEffect)((function(){return function(){w(Object(_.a)("noticiaSelected",!0,"clear"))}}),[]);var F=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"v1/noticias/".concat(p.id),type:"delete"},e.next=3,a(t);case 3:e.sent&&C.push("/noticias"),w(Object(L.a)("confirmAction",!1,!0));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=p.title,R=p.content,U=p.imgs,M=p.fechaHumano,V=p.user_id_owner,B=p.user;function W(){var e,a=Object(o.useState)(),t=Object(n.a)(a,2),r=t[0],c=t[1];return l.a.createElement(g.a,{className:"".concat(z.margin," ").concat(z.paddingSmall)},l.a.createElement(E.a,{container:!0,justify:"space-between"},l.a.createElement(m.b,{to:"/noticias"},l.a.createElement(u.a,null,l.a.createElement(y.a,null))),(V===O.id||(null===(e=j.publicaciones)||void 0===e?void 0:e.modify_otros))&&!d&&(null===p||void 0===p?void 0:p.content)&&l.a.createElement(I,{data:p,handleClick:function(e){c(e.currentTarget)},handleClose:function(e){c(null)},anchorEl:r})))}function G(){return l.a.createElement(E.a,{container:!0,alignContent:"flex-start",spacing:1,item:!0,xs:12,sm:2},l.a.createElement(E.a,{container:!0,justify:"center",item:!0,xs:12},l.a.createElement(f.a,{src:B.avatar,alt:"Avatar del usuario",className:z.largeAvatar},B.nombre.substring(0,1).toUpperCase())),l.a.createElement(E.a,{container:!0,justify:"center",item:!0,xs:!0},l.a.createElement(v.a,{component:"span",textAlign:"center",className:""},B.nombre)))}function J(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{item:!0,xs:12},l.a.createElement(b.a,{component:"span",className:"noticia__title"},P)),l.a.createElement(E.a,{container:!0,item:!0,xs:12},l.a.createElement(v.a,{dangerouslySetInnerHTML:{__html:R},component:"span"})))}function H(e){var a=e.imgs;return(JSON.parse(a)||[]).map((function(e,a){return l.a.createElement(E.a,{item:!0,xs:6,sm:!0,key:a},l.a.createElement(h.a,{variant:"rect",height:150}))}))}function Q(){return l.a.createElement(g.a,{className:"".concat(z.margin," ").concat(z.padding)},l.a.createElement(E.a,{container:!0,spacing:1},B&&l.a.createElement(G,null),l.a.createElement(E.a,{container:!0,justify:"center",spacing:2,item:!0,xs:!0,sm:!0},l.a.createElement(J,null),l.a.createElement(E.a,{container:!0,justify:"center",alignItems:"center",spacing:2,item:!0,xs:12},U&&l.a.createElement(H,{imgs:U})),l.a.createElement("hr",{width:"100%"}),l.a.createElement(E.a,{container:!0,justify:"flex-end",item:!0,xs:12},l.a.createElement(v.a,{component:"span",textAlign:"center",className:"noticia__fecha"},M)))))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("main",{className:z.root,ref:function(){document.title=P?"La Candelaria - ".concat(P):"La Candelaria - Cargando.."}},l.a.createElement(x.a,{maxWidth:"md"},l.a.createElement(W,null),(null===p||void 0===p?void 0:p.content)&&l.a.createElement(Q,null),!(null===p||void 0===p?void 0:p.content)&&d&&l.a.createElement(q,null),!(null===p||void 0===p?void 0:p.content)&&!d&&l.a.createElement("p",{style:{textAlign:"center"}},l.a.createElement("b",null,"Noticia no disponible.")),l.a.createElement(k.a,{action:"Eliminar noticia #".concat(p.id),callback:F}),l.a.createElement(D.a,{callback:function(){w(Object(_.a)("noticiaSelected",!0,"clear"))}}))),!r&&l.a.createElement("footer",{className:"footer"},l.a.createElement(N.a,null)))}},277:function(e,a,t){"use strict";a.a=function(e,a,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:"UPDATE_DIALOG",payload:{dialog:e,open:a,loading:t,data:n}}}},279:function(e,a,t){"use strict";t.d(a,"c",(function(){return y})),t.d(a,"b",(function(){return w})),t.d(a,"a",(function(){return C}));t(7),t(47),t(60);var n=t(48),r=t(88),c=t(0),i=t.n(c),o=t(470),l=t(471),s=t(505),m=t(475),u=t(584),d=t(476),p=t(479),g=t(602),E=t(480),f=t(481),v=t(234),b=(t(469),t(317)),x=t.n(b),h=t(325),j=t.n(h),O=(t(603),t(278));function y(e){var a=e.id,t=e.name,n=e.nameLabel,c=e.control,u=e.defaultValue,d=e.children,p=e.errors,g=e.customWidth,E=void 0!==g&&g,f=Object(r.a)(e,["id","name","nameLabel","control","defaultValue","children","errors","customWidth"]);return i.a.createElement(o.a,Object.assign({},f,{style:{width:E||"100%"},error:Boolean(p)}),i.a.createElement(l.a,{id:a+"-label"},n),i.a.createElement(O.a,{as:i.a.createElement(s.a,{labelId:a+"-label",id:a},d),name:t,control:c,defaultValue:u,rules:{required:{value:!0,message:"Campo requerido."}}}),i.a.createElement(m.a,null,null===p||void 0===p?void 0:p.message))}function w(e){var a=e.registerInput,t=e.data,n=e.defaultValue,r=void 0===n?null:n;return i.a.createElement(o.a,{component:"fieldset"},i.a.createElement(u.a,{color:t.color,component:"legend"},t.title),i.a.createElement(d.a,{defaultValue:r,"aria-label":t.name,name:t.name,row:!0},t.values.map((function(e,n){return i.a.createElement(p.a,{key:n,value:e.value,inputRef:a,control:i.a.createElement(g.a,{color:t.color}),label:e.name,labelPlacement:"end"})}))))}function C(e){var a=e.type,t=void 0===a?"text":a,r=e.name,o=e.registerInput,l=e.errors,s=e.defaultValue,m=e.label,u=e.variant,d=void 0===u?"outlined":u,p=e.textarea,g=void 0!==p&&p,b=e.maxRows,h=void 0===b?6:b,O=e.maxWidth,y=void 0!==O&&O,w=e.size,C=void 0===w?"medium":w,A=e.passwordMode,N=void 0!==A&&A,k=e.focus,D=void 0!==k&&k,S=e.disabledOnLoading,_=void 0===S?null:S,L=Object(c.useState)(!1),T=Object(n.a)(L,2),I=T[0],q=T[1],z={rows:4,rowsMax:h};return i.a.createElement(E.a,Object.assign({inputRef:o,type:N?I?"text":"password":t,name:r,defaultValue:s,label:m,size:C,disabled:null!==_&&_,error:Boolean(l),helperText:null===l||void 0===l?void 0:l.message,autoFocus:D,style:{width:"100%",maxWidth:y||"none"},variant:d,multiline:g,InputProps:{endAdornment:N?i.a.createElement(f.a,{position:"end"},i.a.createElement(v.a,{onClick:function(){q(!I)},size:C},I?i.a.createElement(j.a,null):i.a.createElement(x.a,null))):null}},z))}},284:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(146),i=r.a.forwardRef((function(e,a){return r.a.createElement(c.a,Object.assign({direction:"up",ref:a},e))}));a.a=i},286:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(206),i=t(469),o=t(204),l=t(115),s=Object(l.a)((function(e){return{progress:{position:"absolute"},progressLabel:{marginTop:5}}}));a.a=function(e){var a=e.loading,t=e.backDrop,n=void 0!==t&&t,l=e.children,m=function(e){var a=e.color,t=void 0===a?"primary":a,n=e.progressLabel,o=e.progressLoading,l=e.progress,m=s();return o&&l<=99?r.a.createElement(c.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(c.a,{container:!0,justify:"center",alignItems:"center",item:!0,xs:12},r.a.createElement(i.a,{color:t,variant:"static",value:l})),r.a.createElement("span",{className:m.progress},l,"%"),n&&r.a.createElement(c.a,{item:!0,xs:!0},r.a.createElement("span",{className:m.progressLabel},n))):r.a.createElement(i.a,{color:t})};return a&&!n?r.a.createElement(m,e):a&&n?r.a.createElement(o.a,{open:!0,style:{zIndex:200}},r.a.createElement(m,e)):l}},324:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(579),i=t(580),o=t(581),l=t(582),s=t(583),m=t(233),u=t(284),d=t(23),p=t(277);a.a=function(e){var a=e.action,t=e.callback,n=Object(d.d)((function(e){return{open:e.dialogs.confirmAction.open,loading:e.dialogs.confirmAction.loading}})),g=n.open,E=n.loading,f=Object(d.c)();return r.a.createElement(c.a,{open:g,TransitionComponent:u.a,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description"},r.a.createElement(i.a,{id:"confirm-dialog-title"},"\xbfSeguro?"),r.a.createElement(o.a,null,r.a.createElement(l.a,{id:"confirm-dialog-description"},'Una vez realizada la acci\xf3n "',a,'" no se podr\xe1n deshacer los cambios.')),r.a.createElement(s.a,null,r.a.createElement(m.a,{disabled:E,onClick:function(){f(Object(p.a)("confirmAction",!1,!1))},color:"secondary"},"Cancelar"),r.a.createElement(m.a,{disabled:E,onClick:function(){f(Object(p.a)("confirmAction",!0,!0)),t()},color:"primary"},"Realizar")))}},379:function(e,a,t){"use strict";a.a=function(e,a,t){return{type:"UPDATE_APPDATA",payload:{selected:e,loading:a,data:t}}}},380:function(e,a,t){"use strict";var n=t(47),r=t.n(n),c=t(60),i=t(322),o=t(48),l=t(0),s=t.n(l),m=t(579),u=t(256),d=t(237),p=t(233),g=t(581),E=t(206),f=t(82),v=t(253),b=t(479),x=t(590),h=t(582),j=t(115),O=t(326),y=t.n(O),w=t(367),C=t(278),A=t(65),N=t(101),k=t(284),D=t(286),S=t(279),_=t(23),L=t(277),T=Object(j.a)((function(e){return{appBar:{alignItems:"flex-end",position:"relative"},paddingTopDialog:{paddingTop:e.spacing(3)},button:{marginRight:e.spacing(1)}}}));a.a=function(e){var a,t,n,j=e.tableRef,O=e.callback,I=Object(l.useState)([]),q=Object(o.a)(I,2),z=q[0],F=q[1],P=Object(l.useState)(0),R=Object(o.a)(P,2),U=R[0],M=R[1],V=Object(l.useState)(!1),B=Object(o.a)(V,2),W=B[0],G=B[1],J=Object(_.d)((function(e){return{open:e.dialogs.editNotice.open,loading:e.dialogs.editNotice.loading,data:e.dialogs.editNotice.data}})),H=J.open,Q=J.loading,K=J.data,X=Object(_.c)(),Y=T(),Z=Object(A.b)().enqueueSnackbar,$=Object(N.a)().fetchData,ee=Object(C.c)(),ae=ee.register,te=ee.handleSubmit,ne=ee.errors,re=ee.watch,ce=function(){X(Object(L.a)("editNotice",!1,!1,"clear")),G(!1),F([]),M(0)},ie=Object(l.useCallback)((function(e){var a=Math.round(100*e.loaded/e.total);M(a)}),[]);return Object(l.useEffect)((function(){Q&&function(){var e=Object(c.a)(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("title",K.title),a.append("content",K.content.replace(/\r?\n/g,"</br>")),a.append("onlyUsers",K.onlyUsers),W?(a.append("imgsUpdate",!0),K.imgs.forEach((function(e){a.append("imgs[]",e.file)}))):a.append("imgsUpdate",!1),t={url:"v1/noticias/".concat(K.id),type:"post",data:a,otherData:{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:ie}},e.next=8,$(t);case 8:e.sent?((null===j||void 0===j?void 0:j.current)&&j.current.onQueryChange(),O&&O(),ce()):X(Object(L.a)("editNotice",!0,!1));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[Q]),s.a.createElement(m.a,{open:H,TransitionComponent:k.a,fullScreen:!0},s.a.createElement(u.a,{className:Y.appBar},s.a.createElement(d.a,null,s.a.createElement(p.a,{disabled:Q,onClick:ce,className:Y.button},"Cancelar"),s.a.createElement(D.a,{loading:Q,progressLoading:!0,progress:U,color:"inherit"},s.a.createElement("label",{htmlFor:"submit-editNotice"},s.a.createElement(p.a,{variant:"contained",component:"span",endIcon:s.a.createElement(y.a,null)},"Guardar"))))),s.a.createElement(g.a,{className:Y.paddingTopDialog},s.a.createElement(E.a,{container:!0},s.a.createElement(E.a,{item:!0,xs:12},s.a.createElement(f.a,{className:"box__title box__title--opacity box__title--marginBottom"},"Modificar una nueva noticia")),s.a.createElement(v.a,{maxWidth:"md"},s.a.createElement("form",{onSubmit:te((function(e){e.imgs=z,X(Object(L.a)("editNotice",!0,!0,e))})),autoComplete:"off"},s.a.createElement(E.a,{container:!0,spacing:2,item:!0,xs:12},s.a.createElement(E.a,{container:!0,justify:"center",item:!0,xs:12},s.a.createElement(S.a,{name:"title",label:"T\xedtulo",defaultValue:K.title||"",errors:null===ne||void 0===ne?void 0:ne.title,registerInput:ae({required:{value:!0,message:"Campo requerido."},minLength:{value:6,message:"Campo no v\xe1lido."},maxLength:{value:100,message:"Campo demaciado grande."}}),disabledOnLoading:Q,size:"small",maxWidth:"400px",focus:!0})),s.a.createElement(E.a,{container:!0,justify:"center",item:!0,xs:12},s.a.createElement(E.a,{item:!0,xs:12},s.a.createElement(S.a,{name:"content",label:"Contenido",defaultValue:(null===(a=K.content)||void 0===a?void 0:a.replaceAll("</br>","\n"))||"",errors:null===ne||void 0===ne?void 0:ne.content,registerInput:ae({required:{value:!0,message:"Campo requerido."},minLength:{value:20,message:"Campo no v\xe1lido."},maxLength:{value:5e4,message:"Campo demaciado grande."}}),disabledOnLoading:Q,textarea:!0,maxRows:16})),(null===ne||void 0===ne?void 0:ne.contenido)?s.a.createElement(f.a,{style:{color:"#f44336"},className:Y.showCaracteres},"".concat((re("content")||(null===(t=K.content)||void 0===t?void 0:t.replaceAll("</br>","\n"))||[]).length,"/").concat(5e4," caracteres")):s.a.createElement(f.a,{className:Y.showCaracteres},"".concat((re("content")||(null===(n=K.content)||void 0===n?void 0:n.replaceAll("</br>","\n"))||[]).length,"/").concat(5e4," caracteres"))),s.a.createElement(E.a,{item:!0,xs:12},s.a.createElement(f.a,{className:"box__subtitle box__title--opacity box_title--margin"},"Opciones adicionales")),s.a.createElement(E.a,{item:!0,xs:12},s.a.createElement(b.a,{control:s.a.createElement(x.a,{name:"onlyUsers",inputRef:ae,color:"secondary"}),label:"Disponible solo para usuarios"})),W?s.a.createElement(E.a,{item:!0,xs:12},s.a.createElement(w.a,{fileObjects:z,acceptedFiles:["image/png","image/jpeg"],showPreviewsInDropzone:!1,showPreviews:!0,previewText:"Imagenes selecionadas:",onAdd:function(e){e=e.filter((function(e){return!z.find((function(a){return a.data===e.data}))})),F([].concat(Object(i.a)(z),Object(i.a)(e)))},onDelete:function(e){F(z.filter((function(a){return a!==e})))},filesLimit:10,showAlerts:!1,previewGridProps:{container:{spacing:2},item:{xs:!0}},maxFileSize:5e6,getFileLimitExceedMessage:function(e){return"Solo se permiten hasta ".concat(e," imagenes")},getFileAddedMessage:function(e){return"Archivo ".concat(e," agregado")},getFileRemovedMessage:function(e){return"Archivo ".concat(e," removido")},onAlert:function(e,a){Z(e,{variant:a})},dropzoneText:"Arrastrar o cargar imagenes"})):s.a.createElement(E.a,{item:!0,container:!0,spacing:2},s.a.createElement(E.a,{item:!0,xs:12},s.a.createElement(h.a,null,"Las imagenes de esta noticia ser\xe1n reemplazadas por las que coloque, si deja este campo vacio se entender\xe1 que quiere quitar las fotos de esta publicaci\xf3n.")),s.a.createElement(E.a,{container:!0,justify:"center",item:!0,xs:12},s.a.createElement(p.a,{onClick:function(){G(!0)}},"Deseo cambiar o quitar las fotos")))),s.a.createElement("input",{type:"submit",style:{display:"none"},id:"submit-editNotice"}))))))}}}]);
//# sourceMappingURL=10.4fc221b1.chunk.js.map