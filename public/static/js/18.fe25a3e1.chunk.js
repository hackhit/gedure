(this["webpackJsonpla-candelaria-web"]=this["webpackJsonpla-candelaria-web"]||[]).push([[18],{225:function(e,a,t){"use strict";a.a=function(e,a){return{type:"UPDATE_VALUE_".concat(a),payload:e}}},228:function(e,a,t){"use strict";a.a=function(e,a){return{type:"UPDATE_LOADING_".concat(a),payload:e}}},229:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(409),c=t(181),i=t(283);function l(e){var a=e.color,t=e.progress,n=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{color:a,variant:"static",value:t}),r.a.createElement("span",{style:{position:"relative",top:"-30px"}},t,"%"),n&&r.a.createElement("span",{style:{position:"relative",top:"-10px"}},n))}function s(e){var a=e.loading,t=e.progress,n=e.progressBar,i=e.colorsito,s=e.progressLabel;return a&&n&&100!==t?r.a.createElement(c.a,{open:!0,style:{zIndex:200}},r.a.createElement(l,{color:i,progress:t,label:s})):r.a.createElement(c.a,{open:!0,style:{zIndex:200}},r.a.createElement(o.a,{color:i}))}a.a=function(e){var a=e.estilo,t=e.colorsito,n=e.loading,c=e.text,u=e.onClick,d=void 0===u?function(){}:u,m=e.progressBar,p=void 0!==m&&m,v=e.progress,f=void 0===v?0:v,E=e.progressLabel,b=void 0!==E&&E,g=e.backDrop;return n&&!(void 0!==g&&g)?p&&100!==f?r.a.createElement(l,{color:t,progress:f,label:b}):r.a.createElement(o.a,{color:t}):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{onClick:d,variant:a,type:"submit",color:t},c),n&&r.a.createElement(s,{loading:!0,progress:f,progressBar:p,colorsito:t,progressLabel:b}))}},230:function(e,a,t){"use strict";t.d(a,"c",(function(){return y})),t.d(a,"b",(function(){return O})),t.d(a,"a",(function(){return w}));var n=t(84),r=t(0),o=t.n(r),c=t(365),i=t(440),l=t(218),s=t(414),u=t(415),d=t(368),m=t(417),p=t(437),v=t(418),f=t(420),E=t(214),b=t(231),g=t.n(b),x=t(232),h=t.n(x);function y(e){var a=e.val,t=e.action,n=e.data,r=e.error,u=void 0!==r&&r,d=e.empty,m=void 0===d||d,p=e.classNameSet,v=void 0!==p&&p,f=e.customWidth,E=void 0!==f&&f;return o.a.createElement(c.a,{error:u&&u.status,style:{width:E||"100%"}},o.a.createElement(i.a,{displayEmpty:!0,name:n.name,value:a,onChange:t,className:v||null},n.values.map((function(e,a){return 0===a&&m?o.a.createElement(l.a,{key:a,value:e.value},o.a.createElement("em",null,e.name)):o.a.createElement(l.a,{key:a,value:e.value},e.name)}))),u&&o.a.createElement(s.a,null,u.message))}function O(e){var a=e.val,t=e.accion,n=e.data;return o.a.createElement(c.a,{component:"fieldset"},o.a.createElement(u.a,{color:n.color,component:"legend"},n.title),o.a.createElement(d.a,{"aria-label":n.name,name:n.name,value:a,onChange:t,row:!0},n.values.map((function(e,a){return o.a.createElement(m.a,{key:a,value:e.value,control:o.a.createElement(p.a,{color:n.color}),label:e.name,labelPlacement:"end"})}))))}function w(e){var a=e.data,t=e.accion,c=e.error,i=e.variant,l=void 0===i?"outlined":i,s=e.textarea,u=void 0!==s&&s,d=e.maxRows,m=void 0===d?6:d,p=e.maxWidth,b=void 0!==p&&p,x=e.size,y=void 0===x?"medium":x,O=e.visibleToggle,w=void 0!==O&&O,k=e.focus,N=void 0!==k&&k,j=a.val,S=a.name,C=a.label,_=c.status,T=c.message,z=Object(r.useState)(!1),L=Object(n.a)(z,2),P=L[0],A=L[1],D={rows:4,rowsMax:m};return o.a.createElement(v.a,Object.assign({type:w?P?"text":"password":"text",name:S,value:j,label:C,size:y,autoFocus:N,style:{width:"100%",maxWidth:b||"none"},variant:l,onChange:t,multiline:u,InputProps:{endAdornment:w?o.a.createElement(f.a,{position:"end"},o.a.createElement(E.a,{onClick:function(){A(!P)},size:y},P?o.a.createElement(g.a,null):o.a.createElement(h.a,null))):null}},D,{error:_,helperText:_&&T}))}},231:function(e,a,t){"use strict";var n=t(18);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),o=(0,n(t(19)).default)(r.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");a.default=o},232:function(e,a,t){"use strict";var n=t(18);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),o=(0,n(t(19)).default)(r.default.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");a.default=o},433:function(e,a,t){"use strict";t.r(a);var n=t(84),r=t(226),o=t.n(r),c=t(227),i=t(0),l=t.n(i),s=t(421),u=t(83),d=t(418),m=t(420),p=t(409),v=t(290),f=t.n(v),E=t(438),b=t(230),g=t(229),x=t(12),h=t(225),y=t(228),O=t(50);function w(e){var a=e.action,t=e.value;return l.a.createElement("div",{className:"Box"},l.a.createElement("span",{className:"Box__Title"},"Eliminar publicaci\xf3n"),l.a.createElement("div",{className:"Box__Content"},l.a.createElement(b.c,{action:a,val:t,data:{name:"option",values:[{value:"noticia",name:"Noticia"},{value:"anuncio",name:"Anuncio"}]},classNameSet:"select",customWidth:"auto",empty:!1})))}function k(e){var a=e.option,t=e.enqueueSnackbar,r=e.handleChange,s=e.value,u=window.axios,v=Object(i.useState)(!1),b=Object(n.a)(v,2),g=b[0],x=b[1],h=Object(i.useState)([]),y=Object(n.a)(h,2),O=y[0],w=y[1],k=g&&0===O.length,N="noticia"===a?"noticias":"anuncios",j="noticia"===a?"Noticia":"Anuncio";Object(i.useEffect)((function(){var e,n=u.CancelToken;return k&&function(){var r=Object(c.a)(o.a.mark((function r(){var c,i,l,s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"noticia"!==a){r.next=7;break}return r.next=4,u.get("api/news/search",{cancelToken:new n((function(a){e=a}))});case 4:c=r.sent,r.next=10;break;case 7:return r.next=9,u.get("api/anuncios/search",{cancelToken:new n((function(a){e=a}))});case 9:c=r.sent;case 10:0===c.data.length&&t("No has publicado nada a\xfan",{variant:"info"}),w(c.data),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),u.isCancel(r.t0)||(r.t0.response?(i=r.t0.response,l=i.status,s=i.data,403===l&&t(s.description,{variant:"error"}),t(401===l?"No est\xe1s autorizado":500===l?"No se ha podido conectar con la base de datos":"Error interno en el servidor",{variant:"error"})):t("Error interno en el servidor",{variant:"error"}));case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(){return r.apply(this,arguments)}}()(),function(){e&&e()}}),[k,t,a,u]),Object(i.useEffect)((function(){return function(){w([]);r({target:{name:"id",value:[]}})}}),[a,r]),Object(i.useEffect)((function(){0===s.length&&w([])}),[s]);return l.a.createElement("div",{className:"autoComplete"},l.a.createElement(E.a,{loading:k,value:s,multiple:!0,loadingText:"Cargando...",noOptionsText:"Sin resultados",options:O,onChange:function(e,a){!function(e){r({target:{name:"id",value:e}})}(a)},getOptionLabel:function(e){return"".concat(j," #").concat(e.id)},renderOption:function(e){return"".concat(j," #").concat(e.id)},open:g,onOpen:function(){x(!0)},onClose:function(){x(!1)},renderInput:function(e){return l.a.createElement(d.a,Object.assign({},e,{variant:"outlined",label:"Seleccionar ".concat(N),startAdornment:l.a.createElement(m.a,{position:"start"},l.a.createElement(f.a,null)),endAdornment:l.a.createElement(m.a,{position:"end"},k?l.a.createElement(p.a,{color:"inherit",size:30}):l.a.createElement("div",null))}))}}))}var N={updateLoading:y.a,updateValue:h.a};a.default=Object(x.b)((function(e){return{data:e.panelSettings.delPostingSection}}),N)((function(e){var a=e.data,t=e.updateValue,n=e.updateLoading,r=window.axios,i=a.option,d=a.id,m=a.loading,p=Object(O.b)().enqueueSnackbar,v=function(){var e=Object(c.a)(o.a.mark((function e(){var a,c,l,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"noticia"!==i){e.next=7;break}return e.next=4,r.delete("api/news/".concat(JSON.stringify(d),"?jsonSend=true"));case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,r.delete("api/anuncios/".concat(JSON.stringify(d),"?jsonSend=true"));case 9:a=e.sent;case 10:c=a.data.description,p(c,{variant:"success"}),t({target:{name:"id",value:[]}},"DEL_POSTING"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),e.t0.response?(l=e.t0.response,s=l.status,u=l.data,400===s?p(u.description,{variant:"warning"}):p(403===s||422===s?u.description:500===s?"No se ha podido conectar con la base de datos":"Error interno en el servidor",{variant:"error"})):p("Error interno en el sistema",{variant:"error"});case 19:n(!1,"DEL_POSTING");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),f=function(e){t(e,"DEL_POSTING")};return l.a.createElement(s.a,{container:!0,spacing:2,justify:"center"},l.a.createElement(s.a,{item:!0,xs:12,sm:5,md:3},l.a.createElement(u.a,null,l.a.createElement(w,{action:f,value:i}))),l.a.createElement(s.a,{item:!0,xs:12,sm:10},l.a.createElement(u.a,{className:"Box"},l.a.createElement("div",{className:"Box__Content"},l.a.createElement("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault();var a=!1;if(d.length<=0&&(p("Debe seleccionar alg\xfan post",{variant:"error"}),a=!0),a)return null;n(!0,"DEL_POSTING"),v()},style:{marginTop:"0"}},l.a.createElement(s.a,{container:!0,spacing:2,justify:"center"},l.a.createElement(s.a,{item:!0,xs:12},l.a.createElement(k,{option:i,enqueueSnackbar:p,handleChange:f,value:d})),l.a.createElement(s.a,{item:!0,xs:12,style:{textAlign:"center"}},l.a.createElement(g.a,{estilo:"outlined",colorsito:"inherit",text:"Eliminar",loading:m}))))))))}))}}]);
//# sourceMappingURL=18.fe25a3e1.chunk.js.map