(this["webpackJsonpla-candelaria-web"]=this["webpackJsonpla-candelaria-web"]||[]).push([[13],{231:function(e,a,t){"use strict";a.a=function(e,a){return{type:"UPDATE_VALUE_".concat(a),payload:e}}},235:function(e,a,t){"use strict";a.a=function(e,a){return{type:"UPDATE_LOADING_".concat(a),payload:e}}},236:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(420),o=t(185),i=t(369);function c(e){var a=e.color,t=e.progress,n=e.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{color:a,variant:"static",value:t}),r.a.createElement("span",{style:{position:"relative",top:"-30px"}},t,"%"),n&&r.a.createElement("span",{style:{position:"relative",top:"-10px"}},n))}function s(e){var a=e.loading,t=e.progress,n=e.progressBar,i=e.colorsito,s=e.progressLabel;return a&&n&&100!==t?r.a.createElement(o.a,{open:!0,style:{zIndex:200}},r.a.createElement(c,{color:i,progress:t,label:s})):r.a.createElement(o.a,{open:!0,style:{zIndex:200}},r.a.createElement(l.a,{color:i}))}a.a=function(e){var a=e.estilo,t=e.colorsito,n=e.loading,o=e.text,u=e.onClick,m=void 0===u?function(){}:u,d=e.progressBar,p=void 0!==d&&d,v=e.progress,f=void 0===v?0:v,g=e.progressLabel,E=void 0!==g&&g,b=e.backDrop;return n&&!(void 0!==b&&b)?p&&100!==f?r.a.createElement(c,{color:t,progress:f,label:E}):r.a.createElement(l.a,{color:t}):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{onClick:m,variant:a,type:"submit",color:t},o),n&&r.a.createElement(s,{loading:!0,progress:f,progressBar:p,colorsito:t,progressLabel:E}))}},237:function(e,a,t){"use strict";t.d(a,"c",(function(){return y})),t.d(a,"b",(function(){return C})),t.d(a,"a",(function(){return w}));var n=t(86),r=t(0),l=t.n(r),o=t(378),i=t(461),c=t(210),s=t(424),u=t(565),m=t(380),d=t(427),p=t(579),v=t(428),f=t(430),g=t(209),E=t(238),b=t.n(E),x=t(239),h=t.n(x);function y(e){var a=e.val,t=e.action,n=e.data,r=e.error,u=void 0!==r&&r,m=e.empty,d=void 0===m||m,p=e.classNameSet,v=void 0!==p&&p,f=e.customWidth,g=void 0!==f&&f;return l.a.createElement(o.a,{error:u&&u.status,style:{width:g||"100%"}},l.a.createElement(i.a,{displayEmpty:!0,name:n.name,value:a,onChange:t,className:v||null},n.values.map((function(e,a){return 0===a&&d?l.a.createElement(c.a,{key:a,value:e.value},l.a.createElement("em",null,e.name)):l.a.createElement(c.a,{key:a,value:e.value},e.name)}))),u&&l.a.createElement(s.a,null,u.message))}function C(e){var a=e.val,t=e.accion,n=e.data;return l.a.createElement(o.a,{component:"fieldset"},l.a.createElement(u.a,{color:n.color,component:"legend"},n.title),l.a.createElement(m.a,{"aria-label":n.name,name:n.name,value:a,onChange:t,row:!0},n.values.map((function(e,a){return l.a.createElement(d.a,{key:a,value:e.value,control:l.a.createElement(p.a,{color:n.color}),label:e.name,labelPlacement:"end"})}))))}function w(e){var a=e.data,t=e.accion,o=e.error,i=e.variant,c=void 0===i?"outlined":i,s=e.textarea,u=void 0!==s&&s,m=e.maxRows,d=void 0===m?6:m,p=e.maxWidth,E=void 0!==p&&p,x=e.size,y=void 0===x?"medium":x,C=e.visibleToggle,w=void 0!==C&&C,A=e.focus,B=void 0!==A&&A,O=a.val,P=a.name,L=a.label,j=o.status,z=o.message,I=Object(r.useState)(!1),N=Object(n.a)(I,2),_=N[0],M=N[1],U={rows:4,rowsMax:d};return l.a.createElement(v.a,Object.assign({type:w?_?"text":"password":"text",name:P,value:O,label:L,size:y,autoFocus:B,style:{width:"100%",maxWidth:E||"none"},variant:c,onChange:t,multiline:u,InputProps:{endAdornment:w?l.a.createElement(f.a,{position:"end"},l.a.createElement(g.a,{onClick:function(){M(!_)},size:y},_?l.a.createElement(b.a,null):l.a.createElement(h.a,null))):null}},U,{error:j,helperText:j&&z}))}},238:function(e,a,t){"use strict";var n=t(18);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(19)).default)(r.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");a.default=l},239:function(e,a,t){"use strict";var n=t(18);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(19)).default)(r.default.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");a.default=l},252:function(e,a,t){"use strict";a.a=function(e,a,t){return{type:"ERROR_INFO_".concat(t),payload:{input:e,message:a}}}},253:function(e,a,t){"use strict";a.a=function(e,a,t){var n=!1;return e.map((function(e){return 0===e.value.length?(a(e.name,"Campo obligatorio",t),n=!0):e.minValue&&e.value.length<e.minValue&&(a(e.name,"No v\xe1lido",t),n=!0),null})),n}},374:function(e,a,t){"use strict";var n=t(86),r=t(0),l=t.n(r),o=t(369),i=t(95),c=t.n(i);a.a=function(e){var a=e.name,t=e.label,i=e.reset,s=e.action,u=e.idName,m=e.type,d=e.accepted,p=e.maxSizeFile,v=e.maxInfo,f=void 0===v||v,g=e.multiple,E=void 0!==g&&g,b=e.updatePreview,x=void 0!==b&&b,h=Object(r.useState)(0),y=Object(n.a)(h,2),C=y[0],w=y[1];return Object(r.useEffect)((function(){var e={target:{name:a,files:[]}};w(0),s(e,m)}),[i,s,a,m]),l.a.createElement("div",{className:"uploadArchives",style:{textAlign:"center"}},l.a.createElement("input",{accept:d,id:u,multiple:E,type:"file",name:a,style:{display:"none"},onChange:function(e){var a=e.target.files,t=!1;if(s(e,m),x){var n=x.update,r=x.currentAvatar;a[0]?n(URL.createObjectURL(a[0])):n(r)}for(var l=0;l<a.length;l++)w(l+1),t=!0;!t&&w(0)}}),l.a.createElement("label",{htmlFor:u},l.a.createElement(o.a,{variant:"contained",startIcon:l.a.createElement(c.a,null),disableElevation:!0,component:"span"},"Cargar ",E&&t.multiple?t.multiple:t.unique)),f&&l.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"5px"}},E&&p.multiple?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Archivos seleccionados: ",C),l.a.createElement("span",null,"(Tama\xf1o m\xe1ximo: ",p.multiple,")")):l.a.createElement("span",null,"(Tama\xf1o m\xe1ximo: ",p.unique,")")))}},574:function(e,a,t){"use strict";t.r(a);var n=t(233),r=t.n(n),l=t(234),o=t(86),i=t(0),c=t.n(i),s=t(566),u=t(78),m=t(237),d=t(236),p=t(374),v=t(253),f=t(12),g=t(231),E=t(252),b=t(235),x=t(51);function h(e){var a=e.handleChange,t=e.error,n=e.values,r=e.option,l=e.loading,o=e.updateValue,i=e.contentMaxLength,u=e.progress,v=n.title,f=n.content,g=n.img,E=n.archives;return c.a.createElement(s.a,{container:!0,spacing:2,justify:"center"},c.a.createElement(s.a,{item:!0,xs:12,sm:7,md:5},c.a.createElement(m.a,{data:{val:v,name:"title",label:"T\xedtulo"},size:"small",accion:a,error:t.title})),c.a.createElement(s.a,{item:!0,xs:12,sm:10,md:8,style:{textAlign:"center"}},c.a.createElement(m.a,{data:{val:f,name:"content",label:"Contenido de la publicaci\xf3n"},accion:a,error:t.content,textarea:!0,maxRows:"20"})),c.a.createElement(s.a,{item:!0,xs:12,style:{textAlign:"center"}},t.content.status&&""===t.content.message?c.a.createElement("span",{style:{color:"#f44336"}},"".concat(f.length,"/").concat(i," caracteres")):c.a.createElement("span",null,"".concat(f.length,"/").concat(i," caracteres"))),"noticia"===r&&c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{item:!0,xs:12,sm:5,md:3},c.a.createElement(p.a,{idName:"uploadPublic",accepted:"image/*",reset:r,files:g,action:o,multiple:!0,maxSizeFile:{unique:"3MB",multiple:"3MB"},label:{unique:"imagenes",multiple:"imagenes"},name:"img",type:"PUBLICAR"})),c.a.createElement(s.a,{item:!0,xs:12,sm:5,md:3},c.a.createElement(p.a,{idName:"uploadArchivesPublic",accepted:".doc,.docx,.pdf,.xlsx,.xls",reset:r,files:E,action:o,multiple:!0,maxSizeFile:{unique:"2MB",multiple:"2MB"},label:{unique:"archivos",multiple:"archivos"},name:"archives",type:"PUBLICAR"}))),c.a.createElement(s.a,{item:!0,xs:12,style:{textAlign:"center"}},c.a.createElement(s.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},c.a.createElement(d.a,{estilo:"outlined",colorsito:"inherit",text:"Publicar",loading:l,progressBar:"noticia"===r,progress:u}))))}function y(e){var a=e.action,t=e.value;return c.a.createElement("div",{className:"Box"},c.a.createElement("span",{className:"Box__Title"},"Publicar"),c.a.createElement("div",{className:"Box__Content"},c.a.createElement(m.c,{action:a,val:t,data:{name:"option",values:[{value:"noticia",name:"Noticia"},{value:"anuncio",name:"Anuncio"}]},classNameSet:"select",customWidth:"auto",empty:!1})))}var C={updateValue:g.a,errorInfo:E.a,updateLoading:b.a};a.default=Object(f.b)((function(e){return{data:e.panelSettings.publicarSection}}),C)((function(e){var a=e.data,t=e.updateValue,n=e.errorInfo,m=e.updateLoading,d=window.axios,p=a.option,f=a.loading,g=a.error,E=a.title,b=a.content,C=a.img,w=a.archives,A="noticia"===p?1e4:620,B=Object(i.useState)(0),O=Object(o.a)(B,2),P=O[0],L=O[1],j=Object(x.b)().enqueueSnackbar,z=function(e){t(e,"PUBLICAR")},I=function(e){var a=Math.round(100*e.loaded/e.total);L(a)},N=function(){var e=Object(l.a)(r.a.mark((function e(a){var t,n,l,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"noticia"!==p){e.next=7;break}return e.next=4,d.post("api/news",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:I});case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,d.post("api/anuncios",a);case 9:t=e.sent;case 10:n=t.data.description,j(n,{variant:"success"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),e.t0.response?(l=e.t0.response,o=l.status,i=l.data,400===o?j(i.description,{variant:"warning"}):j(403===o||422===o?i.description:500===o?"No se ha podido conectar con la base de datos":"Error interno en el servidor",{variant:"error"})):j("Error interno en el sistema",{variant:"error"});case 17:m(!1,"PUBLICAR");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement(s.a,{container:!0,spacing:2,justify:"center"},c.a.createElement(s.a,{item:!0,xs:12,sm:5,md:3},c.a.createElement(u.a,null,c.a.createElement(y,{action:z,value:p}))),c.a.createElement(s.a,{item:!0,xs:12,sm:10},c.a.createElement(u.a,{className:"Box"},c.a.createElement("div",{className:"Box__Content"},c.a.createElement("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault();var a=!1,t=[{value:E,name:"title",minValue:5},{value:b,name:"content",minValue:20}];a=Object(v.a)(t,n,"PUBLICAR"),b.length>A&&(n("content","","PUBLICAR"),a=!0),"noticia"===p&&w.length>4&&(j("Solo puede subir un m\xe1ximo de 4 archivos",{variant:"warning"}),a=!0);var r=new FormData;r.append("title",E),r.append("content",b.replace(/\r?\n/g,"</br>"));for(var l=0;l<C.length;l++){var o=C[l];r.append("img[]",o),o.size/1024>3072&&(j("Una de las imagenes supera el tama\xf1o m\xe1ximo",{variant:"warning"}),a=!0)}for(var i=0;i<w.length;i++){var c=w[i];r.append("archives[]",c),c.size/1024>2048&&(j("Uno de los archivos supera el tama\xf1o m\xe1ximo",{variant:"warning"}),a=!0)}if(a)return null;m(!0,"PUBLICAR"),N(r)},method:"POST",style:{marginTop:"0"}},c.a.createElement(h,{handleChange:z,error:g,values:{title:E,content:b,img:C},loading:f,updateValue:t,option:p,contentMaxLength:A,progress:P}))))))}))}}]);
//# sourceMappingURL=13.2e639368.chunk.js.map