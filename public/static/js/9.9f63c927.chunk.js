(this.webpackJsonpGedure=this.webpackJsonpGedure||[]).push([[9],{169:function(e,a,t){"use strict";t.r(a);var n=t(40),r=t.n(n),i=t(53),o=t(52),c=t(0),s=t.n(c),l=t(156),u=t(11),m=t(51),p=t(247),d=t(244),g=t(194),E=t(235),f=t.n(E),b=t(234),h=t.n(b);function v(e){var a=e.type,t=void 0===a?"text":a,n=e.name,r=e.registerInput,i=e.errors,o=e.defaultValue,l=e.label,u=e.variant,E=void 0===u?"outlined":u,b=e.textarea,v=void 0!==b&&b,y=e.maxRows,_=void 0===y?6:y,x=e.maxWidth,O=void 0!==x&&x,w=e.size,j=void 0===w?"medium":w,k=e.passwordMode,A=void 0!==k&&k,N=e.focus,D=void 0!==N&&N,S=e.disabledOnLoading,I=void 0===S?null:S,R=Object(c.useState)(!1),U=Object(m.a)(R,2),L=U[0],C=U[1],T={rows:4,rowsMax:_};return s.a.createElement(p.a,Object.assign({inputRef:r,type:A?L?"text":"password":t,name:n,defaultValue:o,label:l,size:j,disabled:null!==I&&I,error:Boolean(i),helperText:null===i||void 0===i?void 0:i.message,autoFocus:D,style:{width:"100%",maxWidth:O||"none"},variant:E,multiline:v,InputProps:{endAdornment:A?s.a.createElement(d.a,{position:"end"},s.a.createElement(g.a,{onClick:function(){C(!L)},size:j},L?s.a.createElement(h.a,null):s.a.createElement(f.a,null))):null}},T))}var y=t(245),_=t(159);var x=function(e){var a=e.loading,t=e.color,n=void 0===t?"primary":t,r=e.backDrop,i=void 0!==r&&r,o=e.children;return a&&!i?s.a.createElement(y.a,{color:n}):a&&i?s.a.createElement(_.a,{open:!0,style:{zIndex:200}},s.a.createElement(y.a,{color:n})):o},O=t(83),w=t.n(O),j=t(89),k=t(81),A=t(24),N=function(e){return{type:"UPDATE_DATA_USER",payload:e}},D=function(e){return{type:"AUTH_UPDATE",payload:e}};var S={updateDataUser:N,updateAuth:D,logoutApp:t(88).a},I=Object(A.b)((function(e){return{auth:e.userData.auth,theme:e.settings.tema,access_key:e.userData.access_key}}),S)((function(e){var a=e.children,t=e.auth,n=e.theme,o=e.updateDataUser,l=e.updateAuth,p=e.access_key,d=e.logoutApp,g=Object(c.useState)(!0),E=Object(m.a)(g,2),f=E[0],b=E[1],h=Object(k.a)().fetchData,v=Object(u.g)(),y=(Object(u.h)().state||{from:{pathname:"/"}}).from;return Object(c.useEffect)((function(){var e=!1,a=function(){var e=Object(i.a)(r.a.mark((function e(a){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"v1/relogin",data:{headers:{Authorization:"Bearer ".concat(a)}},successText:"Login exitoso",type:"get"},e.next=3,h(t);case 3:n=e.sent,b(!1),n?(n.access_key=a,o(n),l(!0)):(l(!1),d());case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n=JSON.parse(localStorage.getItem("access_key")),c=JSON.parse(sessionStorage.getItem("access_key"));return!t&&f&&"string"===typeof c&&c.length>30?a(c):!t&&f&&"string"===typeof n&&n.length>30?a(n):e||b(!1),function(){e=!0}}),[t,p,h,o,l,f,d]),f?s.a.createElement(j.a,{theme:n}):(t&&"/"===y.pathname?v.push("/panel"):t&&"/"!==y.pathname&&v.replace(y),a)})),R=t(236),U=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"UPDATE_FORM",payload:{form:e,loading:a,inputs:t}}},L=t(158),C=t(210),T=t(161),F=t(65),J=t(77),V=t(246),M=t(248),P=t(191),z=t(197),q=Object(l.a)((function(e){var a,t;return{root:{flexGrow:1},margin:{marginTop:e.spacing(4),marginBottom:e.spacing(4)},login__welcome:(a={background:e.palette.primary.main,width:"100%",padding:e.spacing(2)},Object(o.a)(a,e.breakpoints.down("sm"),{borderRadius:"5px 5px 0px 0px"}),Object(o.a)(a,e.breakpoints.up("md"),{height:500,borderRadius:5}),a),login__box:(t={width:"100%",height:470},Object(o.a)(t,e.breakpoints.down("xs"),{padding:"".concat(e.spacing(2),"px ").concat(e.spacing(4),"px")}),Object(o.a)(t,e.breakpoints.up("sm"),{padding:"".concat(e.spacing(2),"px ").concat(e.spacing(8),"px")}),t),button:{width:170,height:45},login__recovery:{color:e.palette.primary.main,cursor:"pointer"}}}));function B(){var e=q();return s.a.createElement(L.a,{in:!0,direction:"right",mountOnEnter:!0,unmountOnExit:!0},s.a.createElement(C.a,{className:e.login__welcome+" "+e.padding+" MuiPaper-elevation1"},s.a.createElement(T.a,{container:!0,direction:"column",spacing:2,style:{height:"100%"}},s.a.createElement(T.a,{container:!0,item:!0},s.a.createElement("img",{src:w.a,alt:"Logo del instituo",className:"login__logo"})),s.a.createElement(T.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,item:!0,className:e.root},s.a.createElement(T.a,{item:!0},s.a.createElement(F.a,{className:"login__welcome login__welcome--white"},"Bienvenido")),s.a.createElement(T.a,{item:!0},s.a.createElement(F.a,{className:"login__text"},"Al iniciar sesi\xf3n usted podr\xe1:"),s.a.createElement(F.a,{className:"login__text login__text--list"},"- Ver noticias privadas",s.a.createElement("br",null),"- Registrar pagos",s.a.createElement("br",null),"- Recibir y enviar tareas",s.a.createElement("br",null),"- Ver boletas",s.a.createElement("br",null),"- y m\xe1s.."))),s.a.createElement(T.a,{container:!0,justify:"center",item:!0},s.a.createElement(C.a,{textAlign:"center",className:"login__footer"},"\xa9 2020 - Desarrollado por Recker",s.a.createElement("br",null),"Powered by Gedure")))))}function G(e){var a=e.state,t=a.loading,n=a.inputs,o=a.updateForms,c=a.updateDataUser,l=a.updateAuth,m=Object(k.a)().fetchData,p=Object(R.a)(),d=p.register,g=p.handleSubmit,E=p.errors,f=n.user,b=n.password,h=Object(u.g)(),y=q(),_=function(){var e=Object(i.a)(r.a.mark((function e(a){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o("login",!0,a),t={url:"v1/login",data:a,successText:"Login exitoso"},e.next=4,m(t);case 4:(n=e.sent)&&(c(n),a.checkbox?(localStorage.setItem("access_key",JSON.stringify(n.access_key)),sessionStorage.setItem("access_key",JSON.stringify(n.access_key))):sessionStorage.setItem("access_key",JSON.stringify(n.access_key)),l(!0)),o("login",!1);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement(L.a,{in:!0,direction:"left",mountOnEnter:!0,unmountOnExit:!0},s.a.createElement("form",{onSubmit:g(_)},s.a.createElement(J.a,{className:y.login__box},s.a.createElement(T.a,{container:!0,direction:"column",justify:"space-between",spacing:2,style:{height:"100%"}},s.a.createElement(T.a,{container:!0,item:!0,justify:"center"},s.a.createElement(F.a,{className:"login__titleForm login__welcome--italic"},"Rellene los campos")),s.a.createElement(T.a,{container:!0,item:!0},s.a.createElement(v,{name:"user",label:"Usuario",defaultValue:f,errors:E.user,registerInput:d({required:{value:!0,message:"Campo requerido."},minLength:{value:3,message:"Campo no v\xe1lido."}}),disabledOnLoading:t,focus:!0})),s.a.createElement(T.a,{container:!0,item:!0},s.a.createElement(v,{passwordMode:!0,name:"password",label:"Contrase\xf1a",defaultValue:b,errors:E.password,registerInput:d({required:{value:!0,message:"Campo requerido."},minLength:{value:4,message:"Campo no v\xe1lido."}}),disabledOnLoading:t})),s.a.createElement(T.a,{container:!0,item:!0},s.a.createElement(V.a,{control:s.a.createElement(M.a,{color:"primary",name:"checkbox",inputRef:d}),label:"Mantener abierto"})),s.a.createElement(T.a,{container:!0,justify:"center",item:!0},s.a.createElement(x,{loading:t},s.a.createElement(P.a,{color:"primary",variant:"contained",type:"submit",className:y.button},"Entrar"))),s.a.createElement(T.a,{container:!0,justify:"center",item:!0},s.a.createElement(C.a,{component:"span",className:y.login__recovery,onClick:function(){t||h.push("/recovery")}},"Recuperar contrase\xf1a"))))))}var W={updateForms:U,updateDataUser:N,updateAuth:D};a.default=Object(A.b)((function(e){return{loading:e.forms.login.loading,inputs:e.forms.login.inputs}}),W)((function(e){var a=e.updateForms,t=e.updateDataUser,n=e.updateAuth,r=e.loading,i=e.inputs,o=Object(u.g)(),c=q();return s.a.createElement(I,null,s.a.createElement("main",{className:c.root,ref:function(){document.title="La Candelaria - Login"}},s.a.createElement(z.a,{maxWidth:"md",style:{height:"100%",display:"flex",alignItems:"center"}},s.a.createElement(T.a,{container:!0,spacing:2},s.a.createElement(T.a,{container:!0,alignItems:"center",item:!0},s.a.createElement(T.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement(B,null)),s.a.createElement(T.a,{item:!0,xs:12,sm:12,md:8},s.a.createElement(G,{state:{loading:r,inputs:i,updateForms:a,updateDataUser:t,updateAuth:n}}))),s.a.createElement(T.a,{container:!0,justify:"center",item:!0,xs:12},s.a.createElement(C.a,{component:"span",className:"login__return",onClick:function(){r||o.push("/")}},"Volver al inicio"))))))}))}}]);
//# sourceMappingURL=9.9f63c927.chunk.js.map